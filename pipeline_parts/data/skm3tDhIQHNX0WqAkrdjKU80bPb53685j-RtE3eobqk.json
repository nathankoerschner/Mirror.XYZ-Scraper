"{\"content\":{\"body\":\"> ~~TODO å†…éƒ¨åˆ†äº«æ–‡å­—ç¨¿ï¼Œæœ‰æ—¶é—´éœ€è¦æ–Ÿé…Œæ–‡ç¬”ä»¥åŠè¦ç‚¹å‡†ç¡®æ€§~~\\n\\n> åŸæ–‡é“¾æ¥\\n>\\n> ([https://github.com/remix-run/react-router/blob/main/docs/upgrading/v5.md)\\\\[https://github.com/remix-run/react-router/blob/main/docs/upgrading/v5.md\\\\]](https://github.com/remix-run/react-router/blob/main/docs/upgrading/v5.md)%5Bhttps://github.com/remix-run/react-router/blob/main/docs/upgrading/v5.md%5D)\\n\\n## æ–°ç‰¹æ€§\\n\\næ³¨ï¼šæœ¬æ–‡å¸¦æœ‰éƒ¨åˆ†æˆ‘çš„ä¸»è§‚æ„è¯†ï¼Œåˆ é™¤äº†ä¸€äº›è‡ªè®¤ä¸ºä¸é‡è¦çš„å†…å®¹ï¼Œè¯¦ç»†æ¨èé˜…è¯»åŸæ–‡ã€‚\\n\\næŒ‰ç…§æƒ¯ä¾‹æå‰æ€»ç»“å…¨æ–‡å…³é”®å†…å®¹ï¼Œæ„Ÿå…´è¶£å¯ä»¥ä¸‹æ»‘è¯¦ç»†é˜…è¯»ã€‚\\n\\nå‡çº§çš„å‰æï¼š\\n\\n1. router å›¢é˜Ÿå»ºè®®å…ˆå‡çº§åˆ° 5.1 ç‰ˆæœ¬å¹¶ä½¿ç”¨æ–°çš„ API æ¥æ¸è¿›å¼å‡çº§åˆ° v6\\n2. ä¸å†å…¼å®¹ react v16.8 ä»¥ä¸‹ç‰ˆæœ¬\\n\\nä¸»è¦æ”¹åŠ¨å†…å®¹ï¼š\\n\\n 1. åºŸå¼ƒ `Switch` ç»„ä»¶ï¼Œç”± `Routes` ä»£æ›¿ï¼ˆä½¿ç”¨äº†æ™ºèƒ½åŒ¹é…è·¯å¾„ç®—æ³•ï¼‰\\n 2. åºŸå¼ƒ `Redirect` ç»„ä»¶ï¼Œç”± `Navigate` ä»£æ›¿\\n 3. åºŸå¼ƒ `useHistory` æ–¹æ³•ï¼Œç”± `useNavigate` ä»£æ›¿\\n 4. `Route` ç»„ä»¶ç§»é™¤åŸæœ‰ `component` åŠ `render` å±æ€§ï¼Œç»Ÿä¸€é€šè¿‡ `element` å±æ€§ä¼ é€’ï¼š`<Route element={<Home />}>`\\n 5. `Route` ç»„ä»¶æ”¯æŒåµŒå¥—å†™æ³•ï¼ˆv3 ç‰ˆæœ¬ç”¨æ³•å›å½’ï¼‰\\n 6. `Route` ç»„ä»¶çš„ `path` è§„åˆ™å˜æ›´ï¼Œä¸å†æ”¯æŒç±»æ­£åˆ™å†™æ³•\\n 7. æ¶ˆé™¤äº† `v5` ç‰ˆæœ¬ä¸­å¸¦åæ–œæ çš„è·¯å¾„æ—¶ï¼Œ`Link` ç»„ä»¶çš„è·³è½¬æ¨¡ç³Šçš„é—®é¢˜\\n 8. `Link` ç»„ä»¶æ”¯æŒè‡ªåŠ¨æºå¸¦å½“å‰çˆ¶è·¯ç”±ï¼Œä»¥åŠç›¸å¯¹è·¯å¾„å†™æ³•`../home`\\n 9. æ–°å¢ `useRoutes` æ–¹æ³•ï¼Œä»£æ›¿ä¹‹å‰çš„`react-router-config`å†™æ³•ï¼ŒåŒæ ·æ”¯æŒåµŒå¥—\\n10. å…¶ä»–ä¸€äº› API åç§°å˜æ›´\\n\\n## å¼€å§‹å‡çº§\\n\\n### å‡çº§ react ç‰ˆæœ¬è‡³ 16.8 ä»¥ä¸Š\\n\\n> React Router v6 makes heavy use of React hooks, so you'll need to be on React 16.8 or greater before attempting the upgrade to React Router v6. The good news is that React Router v5 is compatible with React >= 15, so if you're on v5 (or v4) you should be able to upgrade React without touching any of your router code.\\n\\næ–°ç‰ˆæœ¬å¤§é‡ä½¿ç”¨ hooksï¼Œæ‰€ä»¥å¿…é¡»è¦å®‰è£… 16.8 ç‰ˆæœ¬ä»¥ä¸Šçš„ reactã€‚\\n\\nç›®å‰å¤§å¤šæ•° react é¡¹ç›®éƒ½å·²ç»ä½¿ç”¨ 17 ç‰ˆæœ¬äº†ï¼Œæ²¡ä»€ä¹ˆå¯è¯´çš„ã€‚è‡³äºå·¨çŸ³é¡¹ç›®ï¼Œè¿˜æ˜¯æš‚æ—¶å…ˆæ­»äº†è¿™æ¡å¿ƒ...\\n\\n### å‡çº§ react-router-dom è‡³ 5.1\\n\\n> It will be easier to make the switch to React Router v6 if you upgrade to v5.1 first. In v5.1, we released an enhancement to the handling of elements that will help smooth the transition to v6. Instead of using and props, just use regular element everywhere and use hooks to access the router's internal state.\\n\\nreact router å›¢é˜Ÿå»ºè®®å…ˆå‡çº§åˆ° v5.1 ç‰ˆæœ¬ï¼Œå¹¶é‡‡ç”¨ä¸€äº›æ–°çš„ APIï¼Œæœ‰åŠ©äºæ¸è¿›å¼å‡çº§åˆ° v6ã€‚\\n\\nä¸è¿‡æˆ‘éƒ½æƒ³è¦å‡çº§äº†ï¼Œè¿˜åœ¨ä¹é‚£ä¸€å“†å—¦å—ï¼ˆä¸»è¦è¿˜æ˜¯ä¸ºäº†å·¨çŸ³..ï¼‰\\n\\n* åœ¨ 5.1 ç‰ˆæœ¬ä¹‹å‰çš„ä½¿ç”¨æ–¹æ³•\\n\\n```\\nimport { Switch, Route } from 'react-router-dom';\\n\\nconst User = ({ id }: { id: string }) => {\\n  return <div>user id: {id}</div>;\\n};\\n\\nconst App = () => {\\n  return (\\n    <Switch>\\n      <Route exact path=\\\"/\\\" component={Home} />\\n      <Route path=\\\"/user/:id\\\" render={(route) => <User id={route.match.params.id} />} />\\n    </Switch>\\n  );\\n};\\n```\\n\\n* 5.1 æ¨èç”¨æ³•\\n\\n```\\nimport { Switch, Route, useParams } from 'react-router-dom';\\n\\nconst User = () => {\\n  const { id } = useParams<{ id: string }>();\\n  return <div>user id: {id}</div>;\\n};\\n\\nconst App = () => {\\n  return (\\n    <Switch>\\n      <Route exact path=\\\"/\\\">\\n        <Home />\\n      </Route>\\n      {/* åŒæ—¶æ”¯æŒprops.childrenå±æ€§ä¼ é€’ */}\\n      <Route path=\\\"/user/:id\\\" children={<User />} />\\n    </Switch>\\n  );\\n};\\n```\\n\\n[React Router hooks ä½¿ç”¨æ–‡æ¡£åŠåŸºæœ¬åŸç†](https://reacttraining.com/blog/react-router-v5-1/)\\n\\n> In general, React Router v5.1 (and v6) favors elements over components (or \\\"element types\\\"). There are a few reasons for this, but we'll discuss more further down when we discuss v6's API.\\n\\n5\\\\.1 ç‰ˆæœ¬ä¹‹åï¼Œreact router æ›´åŠ å€¾å‘äº ReactElement ç±»å‹è€Œä¸æ˜¯ ReactComponent ç±»å‹ï¼Œåœ¨åé¢çš„æ–‡æ¡£ä¼šè¯¦ç»†ä»‹ç»\\n\\n> When you use regular React elements you get to pass the props explicitly. This helps with code readability and maintenance over time. If you were using to get a hold of the params, you can just useParams inside your route component instead.\\n\\n`useParams()`æ¯”`<Route render={(route) => <User id={route.match.params.id} />}>`å¯è¯»æ€§ä»¥åŠç»´æŠ¤æ€§æ›´å¥½ã€‚\\n\\n> Along with the upgrade to v5.1, you should replace any usage of withRouter with hooks. You should also get rid of any \\\"floating\\\" elements that are not inside a . Again, the blog post about v5.1 explains how to do this in greater detail.\\n\\n[5.1 ç‰ˆæœ¬å‘å¸ƒæ–‡æ¡£](https://reacttraining.com/blog/react-router-v5-1/)\\n\\nåœ¨ 5.1 ç‰ˆæœ¬ä¸­ï¼Œåº”è¯¥ä½¿ç”¨ hooks ä»£æ›¿ withRouterï¼Œä¹Ÿåº”è¯¥ç§»é™¤æ‰åœ¨ Switch å¤–éƒ¨çš„ Route èŠ‚ç‚¹ã€‚\\n\\næ€»ä¹‹ï¼Œå‡çº§åˆ° 5.1 ä¹‹åéœ€è¦åšä»¥ä¸‹å‡ ä»¶äº‹æƒ…ï¼š\\n\\n* ä½¿ç”¨`<Route children>`æ›¿æ¢`<Route render>`æˆ–`<Route children>`\\n* ä½¿ç”¨`hooks`è·å–å½“å‰ router ä¿¡æ¯ï¼Œä¾‹å¦‚`useLocation()`æˆ–`useParams()`\\n* ç§»é™¤`withRouter`è£…é¥°å™¨å†™æ³•\\n* å°†åœ¨`<Switch>`å¤–éƒ¨çš„`<Route>`ç»Ÿä¸€æ›¿æ¢ä¸º`useRouteMatch`æˆ–å°†ä»–ä»¬æŒªåˆ°`<Switch>`ä¸­\\n\\n#### ç§»é™¤ Switch å†…éƒ¨çš„ Redirect èŠ‚ç‚¹\\n\\n> If you want to redirect on the initial render, you should move the redirect logic to your server (we wrote more about this here).\\n\\nå¦‚æœéœ€è¦åˆå§‹åŒ–æ¸²æŸ“çš„æ—¶å€™å°±æ‰§è¡Œé‡å®šå‘ï¼Œæ¨èå°†é‡å®šå‘é€»è¾‘æ”¾åœ¨æœåŠ¡ç«¯å®ç°ã€Œ[è¯¦ç»†è¯´æ˜](https://gist.github.com/mjackson/b5748add2795ce7448a366ae8f8ae3bb)ã€ã€‚\\n\\næ–‡ç« ä¸­æè¿°äº†å‡ ç‚¹åˆå§‹åŒ–æ—¶é‡å®šå‘çš„å¼Šç«¯ï¼Œä¸»è¦å¦‚ä¸‹ï¼š\\n\\n* å®¢æˆ·ç«¯å¹¶ä¸æ˜¯çœŸæ­£çš„é‡å®šå‘ï¼Œæ­¤æ—¶çš„ HTTP çŠ¶æ€ç æ˜¯ 200ã€‚çˆ¬è™«è¯»å–é¡µé¢æ—¶å¹¶ä¸ä¼šæ‰§è¡Œå®¢æˆ·ç«¯çš„é‡å®šå‘æ–¹æ³•ï¼Œä¸åˆ©äº SEO\\n* åœ¨ SSR æ—¶ï¼Œæ‰§è¡Œ`ReactDOMServer.renderToString()`å¾—åˆ°çš„ç»“æœæ˜¯ä¸€æ¬¡é‡å®šå‘ï¼Œæµªè´¹æ—¶é—´å’Œèµ„æº\\n\\n> If you want to redirect client-side, move your into a prop.\\n\\nå®¢æˆ·ç«¯æ‰§è¡Œé‡å®šå‘æ¨èä½¿ç”¨ Route çš„ render å±æ€§æ¥æ¸²æŸ“ Redirect\\n\\n```\\n// 5.1 ä¹‹å‰\\n<Switch>\\n  <Redirect from=\\\"about\\\" to=\\\"about-us\\\" />\\n</Switch>\\n\\n// 5.1\\n<Switch>\\n  <Route path=\\\"about\\\" render={() => <Redirect to=\\\"about-us\\\" />} />\\n</Switch>\\n```\\n\\n> Normal elements that are not inside a are ok to remain. They will become elements in v6.\\n\\nè¿™æ˜¯ç¬¬ä¸€ä¸ªç ´åæ€§å˜æ›´ï¼šåœ¨ v6 ç‰ˆæœ¬ä¸­åºŸå¼ƒ`Redirect`ï¼Œç”±`Navigate`ä»£æ›¿ã€‚\\n\\n#### é‡å†™ä½ çš„ã€Œè‡ªå®šä¹‰ Routeã€\\n\\n> Replace any elements inside a that are not plain elements with a regular . This includes any -style custom components.\\n\\nåº”è¯¥å¾ˆå°‘ä¼šæœ‰è‡ªå®šä¹‰ Route çš„åœºæ™¯å‡ºç°ï¼Œè¿™æ®µå…ˆæš‚æ—¶ä¸å…³å¿ƒã€‚\\n\\n\\n---\\n\\n### å‡çº§åˆ° v6 ç‰ˆæœ¬\\n\\n#### ä½¿ç”¨ Routes æ›¿æ¢ Switch\\n\\n> React Router v6 introduces a Routes component that is kind of like Switch, but a lot more powerful.\\n\\nv6 ç‰ˆæœ¬æä¾›äº†åŠŸèƒ½æ›´å¼ºå¤§çš„`Routes`ç»„ä»¶æ¥ä»£æ›¿`Switch`ï¼Œä¸»è¦ä¼˜ç‚¹å¦‚ä¸‹ï¼š\\n\\nç®—äº†...åŸæ–‡çš„å‡ ä¸ªä¼˜ç‚¹åŸºæœ¬éƒ½å¾ˆå°‘ç”¨è¿‡ã€‚æ¯”å¦‚ç¤ºä¾‹ä¸­çš„åµŒå¥—è·¯ç”±ï¼Œåœ¨å®é™…é¡¹ç›®ä¸­ä¸€èˆ¬ç›´æ¥å†™å¥½ config æ–‡ä»¶é€šè¿‡ map æ¸²æŸ“ï¼Œä¸è¿‡`Routes`ä¸å†æŒ‰é¡ºåºåŒ¹é…è·¯å¾„ï¼Œè€Œæ˜¯é‡‡ç”¨äº†ä¸€ç§è‡ªåŠ¨åŒ¹é…æœ€ä½³è·¯å¾„çš„æ–¹æ³•ï¼Œè¿™å—ä¹‹åæœ‰æ—¶é—´å¯ä»¥é˜…è¯»ä¸‹æºç æˆ–ç­‰ç­‰å¤§ä½¬ä»¬çš„æºç åˆ†æè´´ã€‚\\n\\nå¯¹ä¼˜ç‚¹å’Œç¤ºä¾‹æ„Ÿå…´è¶£çš„è¯å¯ä»¥ç›´æ¥æŸ¥çœ‹[åŸæ–‡](https://github.com/remix-run/react-router/blob/main/docs/upgrading/v5.md#upgrade-all-switch-elements-to-routes)\\n\\nè¿™ç®—æ˜¯æ–‡ç« ä¸­çš„ç¬¬äºŒä¸ªç ´åæ€§å˜æ›´ï¼šåºŸå¼ƒ`Switch`ï¼Œç”±`Routes`ä»£æ›¿\\n\\n#### <Route element>çš„ä¼˜åŠ¿\\n\\n> For starters, we see React itself taking the lead here with the <Suspense fallback={}> API. The fallback prop takes a React element, not a component.\\n\\nåœ¨ React çš„ Suspense ç»„ä»¶ä¸­ï¼Œfallback ä½¿ç”¨äº† Element ç±»å‹è€Œä¸æ˜¯ Componentï¼Œè¿™æ ·çš„å†™æ³•å¯ä»¥ä½¿å¼€å‘è€…æ›´åŠ æ–¹ä¾¿çš„æ³¨å…¥æƒ³è¦çš„ props\\n\\n> Using elements instead of components means we don't have to provide a passProps-style API so you can get the props you need to your elements.\\n\\nä½¿ç”¨ Element ç±»å‹ä»£è¡¨ç€ router ä¸å†éœ€è¦æä¾›ç±»ä¼¼äº`passProps`çš„ APIï¼Œå¼€å‘è€…å¯ä»¥ç›´æ¥å°† props æ³¨å…¥åˆ°ç»„ä»¶ä¸­ã€‚\\n\\nå¦å¤–ï¼ŒåŸæ–‡ä¸­æåˆ°åœ¨ v5 ç‰ˆæœ¬ä¸‹æƒ³è¦è‡ªå®šä¹‰ propsï¼Œè¦ä¹ˆä½¿ç”¨`passProps`ï¼Œè¦ä¹ˆä½¿ç”¨`render props`æˆ–è€…`hoc`ã€‚å”‰ åˆä¸€ä¸ªæ—¶ä»£çš„é™¨è½ ğŸ˜Œ\\n\\n```\\n// ç®€å•å†™æ³•\\n<Route path=\\\":id\\\" component={Profile} />\\n// v6å†™æ³•\\n<Route path=\\\":id\\\" element={<Profile />} />\\n\\n// éœ€è¦ä¼ å…¥propsæ—¶\\n<Route path=\\\":id\\\" render={() => (<Profile animate={true} />)} />\\n// v5.1å†™æ³•\\n<Route path=\\\":id\\\" children={<Profile animate={true} />} />\\n// v6å†™æ³•\\n<Route path=\\\":id\\\" element={<Profile animate={true} />} />\\n```\\n\\n> Another important reason for using the element prop in v6 is that is reserved for nesting routes.\\n\\nemmm...æ¢å¤ v3 ç‰ˆæœ¬çš„åµŒå¥—è·¯ç”±å†™æ³•ï¼ŒğŸ‘´ğŸ» é’å›\\n\\n```\\nconst App = () => {\\n  return (\\n    <BrowserRouter>\\n      <Routes>\\n        <Route path=\\\"/\\\" element={<Home />} />\\n        <Route path=\\\"users\\\" element={<Users />}>\\n          <Route path=\\\"me\\\" element={<OwnUserProfile />} />\\n          <Route path=\\\":id\\\" element={<UserProfile />} />\\n        </Route>\\n      </Routes>\\n    </BrowserRouter>\\n  );\\n};\\n\\nconst User = () => {\\n  return (\\n    <div>\\n      <nav>\\n        {/* v6ä¸­ä¼šè‡ªåŠ¨è·³è½¬åˆ°/users/meï¼Œè¿™ä¸ªç‚¹éœ€è¦æ³¨æ„ */}\\n        <Link to=\\\"me\\\">My Profile</Link>\\n      </nav>\\n    </div>\\n  );\\n};\\n```\\n\\nåœ¨å­è·¯ç”±ä¸­ç›´æ¥ä½¿ç”¨ Link è·³è½¬å°†é»˜è®¤å¸¦ä¸Šçˆ¶è·¯ç”±å‰ç¼€ï¼Œè¿™ä¸ªæ”¹åŠ¨è¦ååˆ†æ³¨æ„ï¼Œç®—æ˜¯ç¬¬ä¸‰ä¸ªæ¯”è¾ƒå¤§çš„ç ´åæ€§å˜æ›´\\n\\n#### <Route path>çš„æ³¨æ„äº‹é¡¹\\n\\n> React Router v6 uses a simplified path format. in v6 supports only 2 kinds of placeholders: dynamic :id-style params and _ wildcards.\\n\\nåœ¨ v6 ç‰ˆæœ¬ä¸­ path çš„æœ‰æ•ˆå†™æ³•ï¼š\\n\\n```\\n/groups\\n/groups/admin\\n/users/:id\\n/users/:id/messages\\n/files/*\\n/files/:id/*\\n```\\n\\nä¸å†æ”¯æŒä»¥ä¸‹æ­£åˆ™å†™æ³•ï¼š\\n\\n```\\n/users/:id?\\n/tweets/:id(\\\\d+)\\n/files/*/cat.jpg\\n/files-*\\n```\\n\\n> One other thing to notice is that all path matching in v6 ignores the trailing slash on the URL.\\n\\nv6 ç‰ˆæœ¬ä¸­ä¼šå¿½ç•¥æ‰ path çš„å°¾éƒ¨æ–œæ ï¼Œæ„å‘³ç€å’Œä¸¤ç§å†™æ³•å°†è¢«è®¤ä¸ºæ˜¯åŒä¸€ä¸ªè·¯ç”±\\n\\n#### <Link to>çš„æ³¨æ„äº‹é¡¹\\n\\n> In v5, a value that does not begin with / was ambiguous; it depends on what the current URL is.\\n\\nä¸Šæ–‡æœ‰æåˆ°è¿™ä¸ªå˜æ›´ï¼Œè¿™é‡Œåˆšå¥½å¯ä»¥æ·±å…¥æè¿°ä¸‹ï¼Œ\\n\\nå¯¹äº v5 ç‰ˆæœ¬çš„çš„è§£é‡Šï¼ŒåŸæ–‡ä¸¾ä¾‹å¦‚ä¸‹ï¼š\\n\\n* å½“å‰ url ä¸º`/users`æ—¶ï¼Œä¼šè¢«è§£æä¸º`<a href=\\\"/me\\\" />`\\n* å½“å‰ url ä¸º`/users/`æ—¶ï¼Œä¼šè¢«è§£æä¸º`<a href=\\\"/users/me\\\" />`\\n\\nrouter å›¢é˜Ÿåœ¨ v6 ä¸­æ¶ˆé™¤äº†è¿™ç§æ­§ä¹‰æ¨¡ç³Šçš„å†™æ³•ï¼Œåœ¨`<Route path=\\\"users\\\">`ä¸‹ï¼Œæ— è®ºå½“å‰ url æ˜¯å¦æ‹¥æœ‰åæ–œæ ï¼Œ`<Link to=\\\"me\\\">`å°†å§‹ç»ˆè¢«æ¸²æŸ“ä¸º`<a href=\\\"/users/me\\\" />`ã€‚\\n\\nåŒæ—¶ Link æ”¯æŒ`..`è¿™æ ·çš„ leading segment æ¥è·³è½¬å…¶ä»–ç›¸å¯¹è·¯ç”±\\n\\n```\\n// usersè·¯ç”±\\nconst User = () => {\\n  return (\\n    <div>\\n      {/* è·³è½¬å½“å‰è·¯ç”± /users */}\\n      <Link to=\\\".\\\">Users</Link>\\n      {/* è·³è½¬è·¯ç”± /users/:id */}\\n      <Link to={user.id}>{user.name}</Link>\\n    </div>\\n  );\\n};\\n\\n// users/:id è·¯ç”±ä¸‹\\nconst UserPrfile = () => {\\n  return (\\n    <div>\\n      {/* è¿”å›çˆ¶çº§è·¯ç”± /users */}\\n      <Link to=\\\"..\\\">Return Users</Link>\\n      {/* è·³è½¬è·¯ç”± /users/mj */}\\n      <Link to=\\\"../mj\\\">MJ</Link>\\n    </div>\\n  );\\n};\\n```\\n\\n\\n---\\n\\n#### ä½¿ç”¨ useRoutes ä»£æ›¿ react-router-config åŒ…\\n\\n> All of the functionality from v5's react-router-config package has moved into core in v6.\\n\\né€šå¸¸åœ¨é¡¹ç›®ä¸­å¹¶ä¸ä¼šé€šè¿‡ JSX çš„æ–¹å¼æ¥å£°æ˜ Routeï¼Œå¤§å¤šæ•°ä¼šæ²‰æ·€æˆä¸€ä¸ª config æ–‡ä»¶å¹¶é€šè¿‡ä¸€ä¸ª map æ–¹æ³•è‡ªåŠ¨æ¸²æŸ“ã€‚\\n\\nè€Œä¸Šè¿°åœºæ™¯æœ€å¸¸ä½¿ç”¨çš„åŒ…å°±æ˜¯`react-router-config`ï¼ˆå¾ˆæ—©ä¹‹å‰ umi ä¸­å°±æ˜¯åˆ©ç”¨è¿™ä¸ªåŒ…è§£æ config ä¸­çš„è·¯ç”±é…ç½®ï¼‰\\n\\nä½†æ˜¯åœ¨ v6 ç‰ˆæœ¬ä¸­é»˜è®¤é›†æˆäº†è¿™ç§ APIï¼ŒçœŸæ˜¯å–œå¤§æ™®å¥”çš„ä¸€ä»¶äº‹ã€‚\\n\\n```\\nconst App = () => {\\n  const elements = useRoutes([\\n    { path: '/', element: <Home /> },\\n    { path: 'dashboard', element: <Dashboard /> },\\n    {\\n      path: 'invoices',\\n      element: <Invoices />,\\n      // é€šè¿‡childrenå±æ€§å®ç°åµŒå¥—è·¯ç”±\\n      children: [\\n        { path: ':id', element: <Invoice /> },\\n        { path: 'sent', element: <SentInvoices /> },\\n      ],\\n    },\\n    // é€šè¿‡*é€šé…ç¬¦å®ç°404é¡µé¢\\n    { path: '*', element: <NotFound /> },\\n  ]);\\n};\\n```\\n\\n#### ä½¿ç”¨ useNavigate ä»£æ›¿ useHistory\\n\\n> React Router v6 introduces a new navigation API that is synonymous with and provides better compatibility with suspense-enabled apps.\\n\\nè¿™æ˜¯ç¬¬ä¸‰ä¸ªç ´åæ€§å˜æ›´ï¼šåºŸå¼ƒ`useHistory`ï¼Œç”±`useNavigate`ä»£æ›¿\\n\\n* v6 ç‰ˆæœ¬å†™æ³•\\n\\n```\\nconst App = () => {\\n  const navigate = useNavigate();\\n\\n  const handleClick = () => {\\n    navigate('/home');\\n  };\\n\\n  return (\\n    <div>\\n      <button onClick={handleClick}>è¿”å›é¦–é¡µ</button>\\n    </div>\\n  );\\n};\\n```\\n\\nä¸»è¦å†™æ³•å˜æ›´ï¼š\\n\\n* `history.push(\\\"/\\\")` => `navigate(\\\"/\\\")`\\n* `history.replace(\\\"/\\\")` => `navigate(\\\"/\\\",{ replace: true })`\\n* `history.goBack()` => `navigate(-1)`\\n* `history.goForward()` => `navigate(1)`\\n* `history.go(2)` => `navigate(2)`\\n\\nå¦å¤–ï¼Œnavigate è¿˜æ”¯æŒä¸ Link ç›¸åŒçš„ç›¸å¯¹è·¯å¾„å†™æ³•\\n\\n\\n---\\n\\n#### Link ä¸å†æ”¯æŒ component å±æ€§\\n\\n> First of all, a should pretty much always render an . If yours does not, there's a good chance your app has some serious accessibility and usability problems, and that's no good.\\n\\nå…¶å®å°±æ˜¯å¸Œæœ›æ ‡ç­¾æ›´åŠ è¯­ä¹‰åŒ–\\n\\n\\n---\\n\\n#### NavLink çš„ exact å±æ€§æ›¿æ¢ä¸º end\\n\\nåŸºæœ¬æ²¡ç”¨è¿‡ï¼Œæ²¡ä»€ä¹ˆå¯è¯´çš„\\n\\n```\\n// v5\\n<NavLink exact>\\n// v6\\n<NavLink end>\\n```\\n\\n\\n---\\n\\n### NavLink åˆ é™¤ activeClassName å±æ€§å’Œ activeStyle å±æ€§\\n\\nåœ¨ v6 ç‰ˆæœ¬ä¸­ï¼ŒNavLink çš„ style å’Œ className æ”¯æŒå‡½æ•°å†™æ³•ï¼Œæ‰€ä»¥ç§»é™¤äº†è¿™ä¸¤ä¸ªå±æ€§\\n\\n```\\n<NavLink style={({isActive}) => ({color:\\\"#1890FF\\\"})} className={({isActive}) => \\\"active\\\"}>\\n```\\n\\n\\n---\\n\\n#### StaticRouter æ–¹æ³•è¢«ç§»åŠ¨åˆ°react-router-dom/serveråŒ…ä¸­\\n\\n```\\n// v5\\nimport { StaticRouter } from 'react-router-dom';\\n// v6\\nimport { StaticRouter } from 'react-router-dom/server';\\n```\\n\\n\\n---\\n\\n#### ä½¿ç”¨ useMatch æ›¿æ¢ useRouteMatch\\n\\næ–°çš„ useMatch æ–¹æ³•åŒæ ·ä½¿ç”¨äº†ã€Œæ™ºèƒ½åŒ¹é…ç®—æ³•ã€ï¼ŒåŒæ—¶ API ä¹Ÿæ›´æ”¹ä¸º v6 ä¸­çš„å‡ ä¸ªå‘½å\\n\\næ„Ÿå…´è¶£å¯ä»¥ç›´æ¥æŸ¥çœ‹[API æ–‡æ¡£](https://github.com/remix-run/react-router/blob/main/docs/api.md#usematch)\\n\\n\\n---\\n\\n## æœ€åæ€»ç»“\\n\\næœ€åæŒ‰æƒ¯ä¾‹æ€»ç»“ä¸‹å…¨æ–‡çš„æ ¸å¿ƒå†…å®¹ï¼š\\n\\nå‡çº§çš„å‰æï¼š\\n\\n1. router å›¢é˜Ÿå»ºè®®å…ˆå‡çº§åˆ° 5.1 ç‰ˆæœ¬å¹¶ä½¿ç”¨æ–°çš„ API æ¥æ¸è¿›å¼å‡çº§åˆ° v6\\n2. ä¸å†å…¼å®¹ react v16.8 ä»¥ä¸‹ç‰ˆæœ¬\\n\\nä¸»è¦æ”¹åŠ¨å†…å®¹ï¼š\\n\\n 1. åºŸå¼ƒ `Switch` ç»„ä»¶ï¼Œç”± `Routes` ä»£æ›¿ï¼ˆä½¿ç”¨äº†æ™ºèƒ½åŒ¹é…è·¯å¾„ç®—æ³•ï¼‰\\n 2. åºŸå¼ƒ `Redirect` ç»„ä»¶ï¼Œç”± `Navigate` ä»£æ›¿\\n 3. åºŸå¼ƒ `useHistory` æ–¹æ³•ï¼Œç”± `useNavigate` ä»£æ›¿\\n 4. `Route` ç»„ä»¶ç§»é™¤åŸæœ‰ `component` åŠ `render` å±æ€§ï¼Œç»Ÿä¸€é€šè¿‡ `element` å±æ€§ä¼ é€’ï¼š`<Route element={<Home />}>`\\n 5. `Route` ç»„ä»¶æ”¯æŒåµŒå¥—å†™æ³•ï¼ˆv3 ç‰ˆæœ¬ç”¨æ³•å›å½’ï¼‰\\n 6. `Route` ç»„ä»¶çš„ `path` è§„åˆ™å˜æ›´ï¼Œä¸å†æ”¯æŒç±»æ­£åˆ™å†™æ³•\\n 7. æ¶ˆé™¤äº† `v5` ç‰ˆæœ¬ä¸­å¸¦åæ–œæ çš„è·¯å¾„æ—¶ï¼Œ`Link` ç»„ä»¶çš„è·³è½¬æ¨¡ç³Šçš„é—®é¢˜\\n 8. `Link` ç»„ä»¶æ”¯æŒè‡ªåŠ¨æºå¸¦å½“å‰çˆ¶è·¯ç”±ï¼Œä»¥åŠç›¸å¯¹è·¯å¾„å†™æ³•`../home`\\n 9. æ–°å¢ `useRoutes` æ–¹æ³•ï¼Œä»£æ›¿ä¹‹å‰çš„`react-router-config`å†™æ³•ï¼ŒåŒæ ·æ”¯æŒåµŒå¥—\\n10. å…¶ä»–ä¸€äº› API åç§°å˜æ›´\\n\\n**æœ€åç¥å„ä½è€æ¿èº«ä½“å¥åº·ï¼å‡å®˜å‘è´¢ï¼ï¼ï¼**\",\"timestamp\":1640054135,\"title\":\"React-router-v6\"},\"digest\":\"73fJi30rpp5dD8Xqy7fGI5EA5vwUn_l4XMwfDZrMD5M\",\"authorship\":{\"contributor\":\"0xbf69b0a2754f392C2947d9A123f63498b892a3B6\",\"signingKey\":\"{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"vgeeXpPYZ3Vcirm23e2_RFkZkhoNGNfuRKgmnrAFInA\\\",\\\"y\\\":\\\"1h0rUxoXl3hjga98D5ZKOsyjeGmq80kuuOg2wBuoQpg\\\"}\",\"signature\":\"ajwSx4BSA6RH6cW679GCJafM6YVotsbNfsxupdnL20RNuhE-0RsBDhIBESkKhnKSrD52oQksRMEaBPgfS3upGw\",\"signingKeySignature\":\"0x1b104fedd045030be3251ef0f746ca3ea21b2893a8d5ef28b852260c4d060948299b115feb1d17bcf633b2adc2ae6ce09def56ae3b8653b8e4ca2bbeb27791d91b\",\"signingKeyMessage\":\"I authorize publishing on mirror.xyz from this device using:\\n{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"vgeeXpPYZ3Vcirm23e2_RFkZkhoNGNfuRKgmnrAFInA\\\",\\\"y\\\":\\\"1h0rUxoXl3hjga98D5ZKOsyjeGmq80kuuOg2wBuoQpg\\\"}\",\"algorithm\":{\"name\":\"ECDSA\",\"hash\":\"SHA-256\"}},\"nft\":{},\"version\":\"12-21-2020\",\"originalDigest\":\"73fJi30rpp5dD8Xqy7fGI5EA5vwUn_l4XMwfDZrMD5M\"}"