"{\"content\":{\"body\":\"ES7 åˆ° ES12 å¸¸ç”¨æ–°è¯­æ³•è¯­æ³•ï¼ŒECMAScript çš„é‡å¤æ˜¯å¾ªç¯çš„ï¼Œä½œä¸ºå‰ç«¯å¼€å‘äººå‘˜å¯¹å¹´ ES6 çš„æ–°è¯­æ³•å·²ç»éå¸¸äº†è§£äº†ï¼ŒES7 åˆ° ES12 ä¸­æ·»åŠ äº†ä¸€äº› ECMAScript æƒ³æ‰©å±•ï¼Œå¯èƒ½è¿˜æ˜¯æ²¡æœ‰å¹¿æ³›çš„ 2016 åˆ° 2020 å¹´æ·»åŠ çš„ä¸€äº› ECMAScript è¯­æ³•ä»¥åŠå¸®åŠ©å¤§å®¶æ·±å…¥äº†è§£è‡ªå·±çš„é¡¹ç›®ä¸­ã€‚\\n\\nTC39è§„èŒƒä»‹ç»ï¼šStage 0ï¼ˆstrawmanï¼‰ï¼Œä»»ä½•TC39çš„æˆå‘˜éƒ½æäº¤ã€‚ Stage 1ï¼ˆproposalï¼‰ï¼Œè¿›å…¥è¿™ä¸ªé˜¶æ®µçš„è¿™ä¸ªææ¡ˆè¢«æ­£å¼çš„äº†ï¼Œéœ€è¦åœºæ™¯ä¸APIæè¿°æ²¡æœ‰çš„ã€‚ Stage 2ï¼ˆdraftï¼‰ï¼Œè¿™ä¸ªé˜¶æ®µçš„ç›®æ ‡å¦‚æœèƒ½å¤Ÿæœ€ç»ˆè¿›å…¥æ ‡å‡†ï¼Œé‚£ä¹ˆåœ¨ä»¥åçš„é˜¶æ®µä¸ä¼šæœ‰è¿™ç§æƒ…å†µçš„ï¼Œé˜¶æ®µå¯ä»¥æ¥å—å¢é‡å¯ä»¥ä¿®æ”¹ã€‚ 3ï¼ˆï¼‰ï¼Œç¬¬4é˜¶æ®µçš„ä¿®æ”¹å®Œæˆåï¼Œéœ€è¦æ¯ä¸ªESæ¯å¹´å‘å¸ƒçš„è§„èŒƒã€‚\\n\\nES7ï¼ˆES2016ï¼‰\\n\\n1ã€Array.prototype.includes\\n\\næ¦‚è¿°\\n\\nåŒ…æ‹¬() æ˜¯å¦å¯ä»¥é€‰æ‹©ä¸€ä¸ªç¡®å®šçš„å€¼ï¼Œæƒ…å†µï¼Œå¦‚æœå¯èƒ½è¿”å›çœŸï¼Œå¦åˆ™è¿”å›å‡ã€‚\\n\\nåŠ¨æœºä½¿ç”¨ECMAScriptæ•°ç»„æ—¶ï¼Œéœ€è¦ç¡®å®šæ˜¯å¦å«æœ‰éƒ¨åˆ†å…ƒç´ ã€‚\\n\\nå¯¹NaNä¸ç”Ÿæ•ˆï¼Œ\\\\[NaN\\\\].indexOf(NaN) === -1ã€‚\\n\\nè¯­æ³•\\n\\narr.includes(valueToFind\\\\[, fromIndex\\\\])\\n\\nvalueToFindï¼šéœ€è¦æŸ¥æ‰¾çš„å…ƒç´ å€¼ã€‚\\n\\nfromIndexï¼šé€‰æ‹©çš„ã€‚ä»fromIndex ç´¢å¼•å¤„å¼€å§‹å¯»æ‰¾å€¼ToFindã€‚å¦‚æœä¸ºè´Ÿå€¼ï¼Œåˆ™æŒ‰é¡ºåºä»arr.length + fromIndex çš„ç´¢å¼•å¼€å§‹æœç´¢ï¼ˆå³ä»å¼€å§‹å¾€å‰è·³ fromIndex çš„å¾€ç»å¯¹å€¼ä¸ªç´¢å¼•ï¼Œç„¶ååæœç´¢ï¼‰ã€‚é»˜è®¤ä¸º0ã€‚\\n\\nä¾‹å­ï¼š \\\\[1, 2, 3\\\\].includes(2); // true \\\\[1, 2, 3\\\\].includes(4); // false \\\\[1, 2, 3\\\\].includes(3, 3); // false \\\\[1, 2, 3\\\\].includes(3, -1); // true \\\\[1, 2, NaN\\\\].includes(NaN); // çœŸçš„\\n\\næ³¨æ„äº‹é¡¹ 1ã€å¦‚æœ fromIndex å¤§äºç­‰äºæ•°ç»„çš„é•¿åº¦ï¼Œå·²çŸ¥è¿”å›é”™è¯¯ï¼Œä¸”è¯¥æ•°ç»„ä¸ä¼šè¢«æœç´¢ã€‚ const arr = \\\\['a', 'b', 'c'\\\\]; arr.includes('c', 3); // false arr.includes('c', 100); // false 2ã€å¦‚æœ fromIndex ä¸ºè´Ÿå€¼ï¼Œå‡ºçš„ç´¢å¼•å°†ä½œä¸ºå¼€å§‹æœç´¢ valueToFind çš„ä½ç½®ã€‚å¦‚æœè®¡ç®—å‡ºçš„ç´¢å¼•å°äº 0ï¼Œåˆ™æ•´ä¸ªæ•°ç»„éƒ½è¢«æœç´¢ã€‚ // æ•°ç»„é•¿åº¦ä¸º 3 // fromIndex ä¸º -100 // è®¡ç®—ç´¢å¼•ä¸º 3 + (-100) = -97\\n\\nconst arr = \\\\['a', 'b', 'c'\\\\];\\n\\narr.includes('a', -100); // true arr.includes('b', -100); // true arr.includes('c', -100); // true arr.includes('a', -2); // false 3includes() æ–¹æ³•é€‰æ‹©è®¾è®¡ä¸ºé€šç”¨æ–¹æ³•ã€‚å®ƒä¸è¦æ±‚è¿™ä¸ªå€¼æ˜¯ä¸€ç»„å¯¹è±¡ï¼Œæ‰€ä»¥å®ƒå¯ä»¥è¢«ç”¨äºå…¶ä»–ç±»å‹çš„ï¼ˆæ¯”å¦‚ç±»å¯¹è±¡ï¼‰ã€‚ä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº†åœ¨å‡½æ•°çš„è®ºè¯å¯¹è±¡ä¸Šè°ƒç”¨includes() æ–¹æ³•ã€‚ (function() { console.log(\\\\[\\\\].includes.call(arguments, 'a')); // true console.log(\\\\[\\\\].includes.call(arguments, 'd ')); // å‡ })('a', 'b', 'c');\\n\\n2ã€æ±‚å¹‚è¿ç®—ç¬¦\\n\\næ¦‚è¿°\\n\\næ±‚ç¬¬ä¸€ä¸ªæ´—æ‰‹æ“ä½œæ•°åŠ åˆ°ç¬¬äºŒä¸ªæ“ä½œæ•°çš„å¹‚çš„ç»“æœã€‚å¤„äºé˜¶æ®µ3é˜¶æ®µã€‚ TC39ç›´é€šè½¦\\n\\nè¯­æ³•\\n\\nè¿ç®—ç¬¦ï¼švar1 \\\\*\\\\* var2\\n\\næ±‚å¹‚ä¸€æ˜¯æ˜¯å³ç»“åˆçš„ï¼ša\\\\*\\\\* b \\\\*\\\\* c ç­‰äºa \\\\*\\\\* (b \\\\*\\\\* c)ã€‚ ä¾‹å­ï¼š 2 \\\\*\\\\* 3 // 8 3 \\\\*\\\\* 2 // 9 3 \\\\*\\\\* 2.5 // 15.588457268119896 10 \\\\*\\\\* -1 // 0.1 NaN \\\\*\\\\* 2 // NaN\\n\\n2 \\\\*\\\\* 3 \\\\*\\\\* 2 // 512 2 \\\\*\\\\* (3 \\\\*\\\\* 2) // 512 (2 \\\\*\\\\* 3) \\\\*\\\\* 2 // 64\\n\\n\\\\-(2 \\\\*\\\\* 2) // -4\\n\\n(-2) \\\\*\\\\* 2 // 4\\n\\nES8ï¼ˆES2017ï¼‰\\n\\n1ã€å¼‚æ­¥å’Œç­‰å¾…\\n\\næ¦‚è¿°\\n\\nasync å’Œ await å…³é”®å­—æ˜¯åŸºäº Generator å‡½æ•°çš„è¯­æ³•ç³–ï¼Œä½¿å¼‚æ­¥ä»£ç æ›´å®¹æ˜“å†™å’Œé˜…è¯»ã€‚é€šè¿‡ä½¿ç”¨å®ƒä»¬ï¼Œå¼‚æ­¥ä»£ç çœ‹èµ·æ¥æ›´ç®€å•çš„è€å¼åŒæ­¥ä»£ç ã€‚ TC39 ç›´é€šè½¦\\n\\nåŠ¨æœºç®€åŒ–å¼‚æ­¥ç¼–ç¨‹å†™æ³•ã€‚\\n\\nconst readFile = function (fileName) { return new Promise(function (resolve, reject) { fs.readFile(fileName, function(error, data) { if (error) return reject(error); resolve(data); }); }); };\\n\\nconst gen = function\\\\* () { const f1 = yield readFile('/etc/fstab'); const f2 = yield readFile('/etc/shells'); console.log(f1.toString()); console.log(f2.toString()); };\\n\\nä¸Šé¢ä»£ç çš„å‡½æ•° gen å¯ä»¥å†™æˆ async å‡½æ•°ï¼Œå°±æ˜¯ä¸‹é¢è¿™æ ·ï¼š const asyncReadFile = async function () { const f1 = await readFile('/etc/fstab'); const f2 = await readFile('/etc/shells'); console.log(f1.toString()); console.log(f2.toString()); }; ä¸€æ¯”è¾ƒå°±ä¼šå‘ç°ï¼Œasync å‡½æ•°å°±æ˜¯å°† Generator å‡½æ•°çš„æ˜Ÿå·ï¼ˆ\\\\*ï¼‰æ›¿æ¢æˆ asyncï¼Œå°† yield æ›¿æ¢æˆ awaitã€‚ async å‡½æ•°å¯¹ Generator å‡½æ•°çš„æ”¹è¿›ï¼Œä½“ç°åœ¨ä»¥ä¸‹å››ç‚¹ï¼š\\n\\nå†…ç½®æ‰§è¡Œå™¨ã€‚Generator å‡½æ•°çš„æ‰§è¡Œå¿…é¡»é æ‰§è¡Œå™¨ï¼Œæ‰€ä»¥æ‰æœ‰äº† co æ¨¡å—ï¼Œè€Œ async å‡½æ•°è‡ªå¸¦æ‰§è¡Œå™¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œasync å‡½æ•°çš„æ‰§è¡Œï¼Œä¸æ™®é€šå‡½æ•°ä¸€æ¨¡ä¸€æ ·ï¼Œåªè¦ä¸€è¡Œã€‚ æ›´å¥½çš„è¯­ä¹‰ã€‚async å’Œ awaitï¼Œæ¯”èµ·æ˜Ÿå·ï¼ˆ\\\\*ï¼‰å’Œ yieldï¼Œè¯­ä¹‰æ›´æ¸…æ¥šäº†ã€‚async è¡¨ç¤ºå‡½æ•°é‡Œæœ‰å¼‚æ­¥æ“ä½œï¼Œawait è¡¨ç¤ºç´§è·Ÿåœ¨åé¢çš„è¡¨è¾¾å¼éœ€è¦ç­‰å¾…ç»“æœã€‚ æ›´å¹¿çš„é€‚ç”¨æ€§ã€‚co æ¨¡å—çº¦å®šï¼Œyield å‘½ä»¤åé¢åªèƒ½æ˜¯ Thunk å‡½æ•°æˆ– Promise å¯¹è±¡ï¼Œè€Œ async å‡½æ•°çš„ await å‘½ä»¤åé¢ï¼Œå¯ä»¥æ˜¯ Promise å¯¹è±¡å’ŒåŸå§‹ç±»å‹çš„å€¼ï¼ˆæ•°å€¼ã€å­—ç¬¦ä¸²å’Œå¸ƒå°”å€¼ç­‰ï¼Œä½†è¿™æ—¶ä¼šè‡ªåŠ¨è½¬æˆç«‹å³ resolved çš„ Promise å¯¹è±¡ï¼‰ã€‚ è¿”å›å€¼æ˜¯ Promiseã€‚async å‡½æ•°çš„è¿”å›å€¼æ˜¯ Promise å¯¹è±¡ï¼Œè¿™æ¯” Generator å‡½æ•°çš„è¿”å›å€¼æ˜¯ Iterator å¯¹è±¡æ–¹ä¾¿å¤šäº†ã€‚ä½ å¯ä»¥ç”¨ then æ–¹æ³•æŒ‡å®šä¸‹ä¸€æ­¥çš„æ“ä½œã€‚è¿›ä¸€æ­¥è¯´ï¼Œasync å‡½æ•°å®Œå…¨å¯ä»¥çœ‹ä½œå¤šä¸ªå¼‚æ­¥æ“ä½œï¼ŒåŒ…è£…æˆçš„ä¸€ä¸ª Promise å¯¹è±¡ï¼Œè€Œ await å‘½ä»¤å°±æ˜¯å†…éƒ¨ then å‘½ä»¤çš„è¯­æ³•ç³–ã€‚\\n\\nè¯­æ³• async functionÂ getData() { Â Â constÂ resÂ =Â awaitÂ api.getTableData();Â //Â awaitÂ å¼‚æ­¥ä»»åŠ¡ Â Â //Â doÂ somethingÂ Â  } ä¾‹å­ï¼š async function getStockPriceByName(name) { const symbol = await getStockSymbol(name); const stockPrice = await getStockPrice(symbol); return stockPrice; }\\n\\ngetStockPriceByName('goog').then(function (result) { console.log(result); });\\n\\n2ã€Object.values å’Œ Object.entries\\n\\næ¦‚è¿°\\n\\nObject.values() æ–¹æ³•è¿”å›ä¸€ä¸ªç»™å®šå¯¹è±¡è‡ªèº«çš„æ‰€æœ‰å¯æšä¸¾å±æ€§å€¼çš„æ•°ç»„ï¼Œå€¼çš„é¡ºåºä¸ä½¿ç”¨ for...in å¾ªç¯çš„é¡ºåºç›¸åŒï¼ˆåŒºåˆ«åœ¨äº for...in å¾ªç¯æšä¸¾åŸå‹é“¾ä¸­çš„å±æ€§ï¼‰ã€‚ Object.entries() æ–¹æ³•è¿”å›ä¸€ä¸ªç»™å®šå¯¹è±¡è‡ªèº«å¯æšä¸¾å±æ€§çš„é”®å€¼å¯¹æ•°ç»„ï¼Œå…¶æ’åˆ—ä¸ä½¿ç”¨ for...in å¾ªç¯éå†è¯¥å¯¹è±¡æ—¶è¿”å›çš„é¡ºåºä¸€è‡´ï¼ˆåŒºåˆ«åœ¨äº for...in å¾ªç¯è¿˜ä¼šæšä¸¾åŸå‹é“¾ä¸­çš„å±æ€§ï¼‰ã€‚ è¯¥ææ¡ˆç›®å‰å¤„äº Stage 4 é˜¶æ®µã€‚ TC39 ç›´é€šè½¦\\n\\nè¯­æ³•\\n\\nObject.values(obj)\\n\\nobjï¼šè¢«è¿”å›å¯æšä¸¾å±æ€§å€¼çš„å¯¹è±¡ã€‚\\n\\nObject.entries(obj)\\n\\nobjï¼šå¯ä»¥è¿”å›å…¶å¯æšä¸¾å±æ€§çš„é”®å€¼å¯¹çš„å¯¹è±¡ã€‚\\n\\nä¾‹å­ï¼š Object.values({a:Â 1,Â b:Â 2,Â c:Â 3});Â  //Â \\\\[1,Â 2,Â 3\\\\] Object.keys({a:Â 1,Â b:Â 2,Â c:Â 3});Â    //Â \\\\[a,Â b,Â c\\\\] Object.entries({a:Â 1,Â b:Â 2,Â c:Â 3});Â //Â \\\\[\\\\[\\\"a\\\",Â 1\\\\],Â \\\\[\\\"b\\\",Â 2\\\\],Â \\\\[\\\"c\\\",Â 3\\\\]\\\\]\\n\\n3ã€Object.getOwnPropertyDescriptors\\n\\næ¦‚è¿°\\n\\nè·å–ä¸€ä¸ªå¯¹è±¡æ‰€æœ‰è‡ªèº«å±æ€§çš„æè¿°ç¬¦ï¼Œå¦‚æœæ²¡æœ‰ä»»ä½•è‡ªèº«å±æ€§ï¼Œåˆ™è¿”å›ç©ºå¯¹è±¡ã€‚ è¯¥ææ¡ˆç›®å‰å¤„äº Stage 4 é˜¶æ®µã€‚ TC39 ç›´é€šè½¦\\n\\nåŠ¨æœº ECMAScript ä¸­æ²¡æœ‰ä¸€ä¸ªæ–¹æ³•èƒ½å¤Ÿç®€åŒ–ä¸¤ä¸ªå¯¹è±¡ä¹‹é—´çš„æ‹·è´ã€‚å¦‚ä»Šï¼Œå‡½æ•°å¼ç¼–ç¨‹å’Œä¸å¯å˜å¯¹è±¡æ˜¯å¤æ‚åº”ç”¨ç¨‹åºçš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œæ¯ä¸ªæ¡†æ¶æˆ–åº“éƒ½åœ¨å®ç°è‡ªå·±çš„æ ·æ¿æ–‡ä»¶ï¼Œä»¥ä¾¿åœ¨ç»„åˆå¯¹è±¡æˆ–åŸå‹ä¹‹é—´æ­£ç¡®å¤åˆ¶å±æ€§ã€‚ å›åˆ° Object.assignï¼Œå®ƒå¤§å¤šæ•°æƒ…å†µä¸‹ä¼šå‡ºç°ä¸€äº›ä¸å¸Œæœ›å‡ºç°çš„è¡Œä¸ºï¼Œå› ä¸ºå®ƒçš„å¤åˆ¶æ–¹å¼ä¼šåå™¬è¡Œä¸ºï¼šå®ƒç›´æ¥è®¿é—®å±æ€§å’Œç¬¦å·ï¼Œè€Œä¸æ˜¯å®ƒä»¬çš„æè¿°ç¬¦ï¼Œä¸¢å¼ƒå¯èƒ½çš„è®¿é—®å™¨ï¼Œåœ¨ç»„åˆæ›´å¤æ‚çš„å¯¹è±¡æˆ–ç±»çš„åŸå‹æ—¶å¯èƒ½ä¼šå¯¼è‡´å±é™©ã€‚ æ£€ç´¢æ‰€æœ‰æè¿°ç¬¦ï¼Œæ— è®ºæ˜¯å¦å¯æšä¸¾ï¼Œä¹Ÿæ˜¯å®ç°ç±»åŠå…¶åŸå‹ç»„åˆçš„å…³é”®ï¼Œå› ä¸ºé»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä»¬å…·æœ‰ä¸å¯æšä¸¾çš„æ–¹æ³•å’Œè®¿é—®å™¨ã€‚ æ­¤å¤–ï¼Œè£…é¥°å™¨å¯ä»¥è½»æ¾åœ°ä»ä¸€ä¸ªç±»æˆ– mixin ä¸­è·å–æ‰€æœ‰æè¿°ç¬¦ï¼Œå¹¶é€šè¿‡ Object.defineProperties è¿‡æ»¤ä¸éœ€è¦çš„æè¿°ç¬¦ã€‚ Object.assign åªé€‚åˆåšå¯¹è±¡çš„æµ…æ‹·è´ã€‚\\n\\nè¯­æ³•\\n\\nObject.getOwnPropertyDescriptors(obj)\\n\\nobjï¼šä»»æ„å¯¹è±¡\\n\\nä¾‹å­ï¼š const a = { b: 123, c: 'æ–‡å­—å†…å®¹', d() { return 2; } }; Object.getOwnPropertyDescriptors(a); // è¾“å‡ºç»“æœ { b:{ configurable: true, enumerable: true, value: 123, writable: true, \\\\[\\\\[Prototype\\\\]\\\\]: Object, } c:{ configurable: true, enumerable: true, value: \\\"æ–‡å­—å†…å®¹\\\", writable: true, \\\\[\\\\[Prototype\\\\]\\\\]: Object, } d:{ configurable: true, enumerable: true, value: Æ’ d(), writable: true, \\\\[\\\\[Prototype\\\\]\\\\]: Object, }, \\\\[\\\\[Prototype\\\\]\\\\]: Object, }\\n\\n4ã€String.prototype.padStart å’Œ String.prototype.padEnd\\n\\næ¦‚è¿°\\n\\npadStart() æ–¹æ³•ç”¨å¦ä¸€ä¸ªå­—ç¬¦ä¸²å¡«å……å½“å‰å­—ç¬¦ä¸²ï¼ˆå¦‚æœéœ€è¦çš„è¯ï¼Œä¼šé‡å¤å¤šæ¬¡ï¼‰ï¼Œä»¥ä¾¿äº§ç”Ÿçš„å­—ç¬¦ä¸²è¾¾åˆ°ç»™å®šçš„é•¿åº¦ã€‚ä»å½“å‰å­—ç¬¦ä¸²çš„å¼€å¤´ï¼ˆå·¦ä¾§ï¼‰å¼€å§‹å¡«å……ã€‚ padEnd() æ–¹æ³•ä¼šç”¨ä¸€ä¸ªå­—ç¬¦ä¸²å¡«å……å½“å‰å­—ç¬¦ä¸²ï¼ˆå¦‚æœéœ€è¦çš„è¯åˆ™é‡å¤å¡«å……ï¼‰ï¼Œè¿”å›å¡«å……åè¾¾åˆ°æŒ‡å®šé•¿åº¦çš„å­—ç¬¦ä¸²ã€‚ä»å½“å‰å­—ç¬¦ä¸²çš„æœ«å°¾ï¼ˆå³ä¾§ï¼‰å¼€å§‹å¡«å……ã€‚ è¯¥ææ¡ˆç›®å‰å¤„äº Stage 4 é˜¶æ®µã€‚ TC39 ç›´é€šè½¦\\n\\nè¯­æ³•\\n\\nstr.padStart(targetLength \\\\[, padString\\\\])\\n\\ntargetLengthï¼šå½“å‰å­—ç¬¦ä¸²éœ€è¦å¡«å……åˆ°çš„ç›®æ ‡é•¿åº¦ã€‚å¦‚æœè¿™ä¸ªæ•°å€¼å°äºå½“å‰å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œåˆ™è¿”å›å½“å‰å­—ç¬¦ä¸²æœ¬èº«ã€‚\\n\\npadStringï¼šå¯é€‰çš„ã€‚å¡«å……å­—ç¬¦ä¸²ã€‚å¦‚æœå­—ç¬¦ä¸²å¤ªé•¿ï¼Œä½¿å¡«å……åçš„å­—ç¬¦ä¸²é•¿åº¦è¶…è¿‡äº†ç›®æ ‡é•¿åº¦ï¼Œåˆ™åªä¿ç•™æœ€å·¦ä¾§çš„éƒ¨åˆ†ï¼Œå…¶ä»–éƒ¨åˆ†ä¼šè¢«æˆªæ–­ã€‚æ­¤å‚æ•°çš„é»˜è®¤å€¼ä¸º \\\" \\\"ï¼ˆU+0020ï¼‰ã€‚\\n\\nstr.padEnd(targetLength \\\\[, padString\\\\])\\n\\ntargetLengthï¼šå½“å‰å­—ç¬¦ä¸²éœ€è¦å¡«å……åˆ°çš„ç›®æ ‡é•¿åº¦ã€‚å¦‚æœè¿™ä¸ªæ•°å€¼å°äºå½“å‰å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œåˆ™è¿”å›å½“å‰å­—ç¬¦ä¸²æœ¬èº«ã€‚\\n\\npadStringï¼šå¯é€‰çš„ã€‚å¡«å……å­—ç¬¦ä¸²ã€‚å¦‚æœå­—ç¬¦ä¸²å¤ªé•¿ï¼Œä½¿å¡«å……åçš„å­—ç¬¦ä¸²é•¿åº¦è¶…è¿‡äº†ç›®æ ‡é•¿åº¦ï¼Œåˆ™åªä¿ç•™æœ€å·¦ä¾§çš„éƒ¨åˆ†ï¼Œå…¶ä»–éƒ¨åˆ†ä¼šè¢«æˆªæ–­ã€‚æ­¤å‚æ•°çš„ç¼ºçœå€¼ä¸º \\\" \\\"ï¼ˆU+0020ï¼‰ã€‚\\n\\nä¾‹å­ï¼š 'abc'.padStart(10);         // \\\"       abc\\\" 'abc'.padStart(10, \\\"foo\\\");  // \\\"foofoofabc\\\" 'abc'.padStart(6,\\\"123465\\\"); // \\\"123abc\\\" 'abc'.padStart(8, \\\"0\\\");     // \\\"00000abc\\\" 'abc'.padStart(1);          // \\\"abc\\\" 'abc'.padEnd(10);          // \\\"abc       \\\" 'abc'.padEnd(10, \\\"foo\\\");   // \\\"abcfoofoof\\\" 'abc'.padEnd(6, \\\"123456\\\"); // \\\"abc123\\\" 'abc'.padEnd(1);           // \\\"abc\\\"\\n\\nES9ï¼ˆES2018ï¼‰\\n\\n1ã€for await...of\\n\\næ¦‚è¿°\\n\\nfor await...of è¯­å¥åˆ›å»ºä¸€ä¸ªå¾ªç¯ï¼Œè¯¥å¾ªç¯éå†å¼‚æ­¥å¯è¿­ä»£å¯¹è±¡ä»¥åŠåŒæ­¥å¯è¿­ä»£å¯¹è±¡ï¼ŒåŒ…æ‹¬: å†…ç½®çš„ Stringã€Arrayã€ç±»ä¼¼æ•°ç»„å¯¹è±¡ï¼ˆä¾‹å¦‚ arguments æˆ– NodeListï¼‰ã€TypedArrayã€Mapã€Set å’Œç”¨æˆ·å®šä¹‰çš„å¼‚æ­¥/åŒæ­¥è¿­ä»£å™¨ã€‚å®ƒä½¿ç”¨å¯¹è±¡çš„æ¯ä¸ªä¸åŒå±æ€§çš„å€¼è°ƒç”¨è¦æ‰§è¡Œçš„è¯­å¥æ¥è°ƒç”¨è‡ªå®šä¹‰è¿­ä»£é’©å­ã€‚ ç±»ä¼¼äº await è¿ç®—ç¬¦ä¸€æ ·ï¼Œè¯¥è¯­å¥åªèƒ½åœ¨ä¸€ä¸ª async function å†…éƒ¨ä½¿ç”¨ã€‚ TC39 ç›´é€šè½¦\\n\\nåŠ¨æœº è¿­ä»£å™¨æ¥å£ï¼ˆåœ¨ ECMAScript 2015 ä¸­å¼•å…¥ï¼‰æ˜¯ä¸€ç§é¡ºåºæ•°æ®è®¿é—®åè®®ï¼Œå®ƒæ”¯æŒå¼€å‘é€šç”¨å’Œå¯ç»„åˆçš„æ•°æ®ä½¿ç”¨è€…å’Œè½¬æ¢å™¨ã€‚ ç”±äºåœ¨è¿­ä»£å™¨æ–¹æ³•è¿”å›æ—¶å¿…é¡»çŸ¥é“åºåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªå€¼å’Œæ•°æ®æºçš„â€œå®Œæˆâ€çŠ¶æ€ï¼Œå› æ­¤è¿­ä»£å™¨ä»…é€‚ç”¨äºè¡¨ç¤ºåŒæ­¥æ•°æ®æºã€‚è™½ç„¶ JavaScript ç¨‹åºå‘˜é‡åˆ°çš„è®¸å¤šæ•°æ®æºæ˜¯åŒæ­¥çš„ï¼ˆä¾‹å¦‚å†…å­˜åˆ—è¡¨å’Œå…¶ä»–æ•°æ®ç»“æ„ï¼‰ï¼Œä½†è®¸å¤šå…¶ä»–æ•°æ®æºä¸æ˜¯ã€‚ä¾‹å¦‚ï¼Œä»»ä½•éœ€è¦ I/O è®¿é—®çš„æ•°æ®æºé€šå¸¸ä¼šä½¿ç”¨åŸºäºäº‹ä»¶æˆ–æµå¼å¼‚æ­¥ API æ¥è¡¨ç¤ºã€‚ä¸å¹¸çš„æ˜¯ï¼Œè¿­ä»£å™¨ä¸èƒ½ç”¨äºè¡¨ç¤ºè¿™æ ·çš„æ•°æ®æºã€‚ ï¼ˆå³ä½¿æ˜¯ promise çš„è¿­ä»£å™¨ä¹Ÿæ˜¯ä¸å¤Ÿçš„ï¼Œå› ä¸ºå®ƒåªå…è®¸å¼‚æ­¥ç¡®å®šå€¼ï¼Œä½†éœ€è¦åŒæ­¥ç¡®å®šâ€œå®Œæˆâ€çŠ¶æ€ã€‚ï¼‰ ä¸ºäº†ä¸ºå¼‚æ­¥æ•°æ®æºæä¾›é€šç”¨çš„æ•°æ®è®¿é—®åè®®ï¼Œå› æ­¤å¼•å…¥äº†å¼‚æ­¥è¿­ä»£è¯­å¥ for await...ofã€‚\\n\\nè¯­æ³•\\n\\nasyncÂ functionÂ process(iterable)Â { Â Â for await (variable of iterable) { // Do something. } }\\n\\nvariableï¼šåœ¨æ¯æ¬¡è¿­ä»£ä¸­ï¼Œå°†ä¸åŒå±æ€§çš„å€¼åˆ†é…ç»™å˜é‡ã€‚å˜é‡æœ‰å¯èƒ½ä»¥ constã€let æˆ–è€… var æ¥å£°æ˜ã€‚\\n\\niterableï¼šè¢«è¿­ä»£æšä¸¾å…¶å±æ€§çš„å¯¹è±¡ã€‚ä¸ for...of ç›¸æ¯”ï¼Œè¿™é‡Œçš„å¯¹è±¡å¯ä»¥è¿”å› Promiseï¼Œå¦‚æœæ˜¯è¿™æ ·ï¼Œé‚£ä¹ˆ variable å°†æ˜¯ Promise æ‰€åŒ…å«çš„å€¼ï¼Œå¦åˆ™æ˜¯å€¼æœ¬èº«ã€‚\\n\\nä¾‹å­ï¼š function getTime(seconds){ return new Promise(resolve=>{ setTimeout(() => { resolve(seconds) }, seconds); }) } async function test(){ let arr = \\\\[getTime(500), getTime(300), getTime(3000)\\\\]; for await (let x of arr){ console.log(x); // 500  300 3000 æŒ‰é¡ºåºçš„ } }\\n\\ntest()\\n\\n2ã€Promise.prototype.finally\\n\\næ¦‚è¿°\\n\\nfinally() æ–¹æ³•è¿”å›ä¸€ä¸ª Promiseã€‚åœ¨ Promise ç»“æŸæ—¶ï¼Œæ— è®ºç»“æœæ˜¯ fulfilled è¿˜æ˜¯ rejectedï¼Œéƒ½ä¼šæ‰§è¡ŒæŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚è¿™ä¸ºåœ¨ Promise æ˜¯å¦æˆåŠŸå®Œæˆåéƒ½éœ€è¦æ‰§è¡Œçš„ä»£ç æä¾›äº†ä¸€ç§æ–¹å¼ã€‚ è¿™é¿å…äº†åŒæ ·çš„è¯­å¥éœ€è¦åœ¨ then() å’Œ catch() ä¸­å„å†™ä¸€æ¬¡çš„æƒ…å†µã€‚ TC39 ç›´é€šè½¦\\n\\nåŠ¨æœº æœ‰äº›æ—¶å€™åœ¨ Promise å®Œæˆæ—¶ï¼Œä¸ç®¡ç»“æœæ˜¯ fulfilled è¿˜æ˜¯ rejectedï¼Œæˆ‘ä»¬æƒ³æ‰§è¡Œä¸€äº›æ¸…ç†å·¥ä½œï¼Œæˆ–æ˜¯è®¾ç½®ä¸€äº›å˜é‡ï¼Œè¿™ä¸ªæ˜¯æ—¶å€™ï¼Œæˆ‘ä»¬ä¸å¾—ä¸åœ¨ resolve å’Œ catch ä¸­æŠŠåŒæ ·çš„ä»£ç ä¹¦å†™ä¸¤éï¼Œè¿™æ˜¯é‡å¤ä¸”æ— æ„ä¹‰çš„å·¥ä½œã€‚ Promise.finally() ææ¡ˆï¼Œå¯ä»¥åœ¨ Promise å®Œæˆæ—¶ï¼Œæ— è®ºç»“æœæ˜¯ fulfilled è¿˜æ˜¯ rejectedï¼Œéƒ½ä¼šæ‰§è¡Œ finally å‡½æ•°ã€‚\\n\\nè¯­æ³•\\n\\nPromise.resolve().then().catch(eÂ =>Â e).finally(onFinally);\\n\\nonFinallyï¼šPromise ç»“æŸåè°ƒç”¨çš„ Functionã€‚\\n\\nä¾‹å­ï¼š let isLoading = true; fetch(myRequest).then(function(response) { const contentType = response.headers.get(\\\"content-type\\\"); if(contentType && contentType.includes(\\\"application/json\\\")) { return response.json(); } throw new TypeError(\\\"Oops, we haven't got JSON!\\\"); }) .then(function(json) { /\\\\* process your JSON further \\\\*/ }) .catch(function(error) { console.log(error); }) .finally(function() { isLoading = false; });\\n\\næ³¨æ„äº‹é¡¹ finally() è™½ç„¶ä¸ .then(onFinally, onFinally) ç±»ä¼¼ï¼Œä½†å®ƒä»¬ä¸åŒçš„æ˜¯ï¼š\\n\\nè°ƒç”¨å†…è”å‡½æ•°æ—¶ï¼Œä¸éœ€è¦å¤šæ¬¡å£°æ˜è¯¥å‡½æ•°æˆ–ä¸ºè¯¥å‡½æ•°åˆ›å»ºä¸€ä¸ªå˜é‡ä¿å­˜å®ƒã€‚ ç”±äºæ— æ³•çŸ¥é“ promise çš„æœ€ç»ˆçŠ¶æ€ï¼Œæ‰€ä»¥ finally çš„å›è°ƒå‡½æ•°ä¸­ä¸æ¥æ”¶ä»»ä½•å‚æ•°ï¼Œå®ƒä»…ç”¨äºæ— è®ºæœ€ç»ˆç»“æœå¦‚ä½•éƒ½è¦æ‰§è¡Œçš„æƒ…å†µã€‚ ä¸ Promise.resolve(2).then(() => {}, () => {})ï¼ˆresolved çš„ç»“æœä¸º undefinedï¼‰ä¸åŒï¼ŒPromise.resolve(2).finally(() => {}) resolved çš„ç»“æœä¸º 2ã€‚ åŒæ ·ï¼ŒPromise.reject(3).then(() => {}, () => {})ï¼ˆfulfilled çš„ç»“æœä¸º undefinedï¼‰ï¼ŒPromise.reject(3).finally(() => {}) rejected çš„ç»“æœä¸º 3ã€‚\\n\\n3ã€Object Rest/Spread Properties\\n\\næ¦‚è¿°\\n\\nå°† Rest è¯­æ³•æ·»åŠ åˆ°è§£æ„ä¸­ã€‚Rest å±æ€§æ”¶é›†é‚£äº›å°šæœªè¢«è§£æ„æ¨¡å¼æ‹¾å–çš„å‰©ä½™å¯æšä¸¾å±æ€§é”®ã€‚ å°† Spread è¯­æ³•æ·»åŠ åˆ°å¯¹è±¡å­—é¢é‡ä¸­ã€‚å°†å·²æœ‰å¯¹è±¡çš„æ‰€æœ‰å¯æšä¸¾ï¼ˆ enumerable ï¼‰å±æ€§æ‹·è´åˆ°æ–°æ„é€ çš„å¯¹è±¡ä¸­ã€‚ è¯¥ææ¡ˆç›®å‰å¤„äº Stage 4 é˜¶æ®µã€‚ TC39 ç›´é€šè½¦\\n\\nåŠ¨æœº æµ…æ‹·è´ï¼ˆShallow-cloningï¼Œä¸åŒ…å« prototypeï¼‰å’Œå¯¹è±¡åˆå¹¶ï¼Œå¯ä»¥ä½¿ç”¨æ›´ç®€çŸ­çš„ Spread è¯­æ³•ã€‚è€Œä¸å¿…å†ä½¿ç”¨ Object.assign() æ–¹å¼ã€‚ const obj1 = { foo: 'bar', x: 42 }; const obj2 = { foo: 'baz', y: 13 };\\n\\nconst clonedObj = { ...obj1 }; // å…‹éš†åçš„å¯¹è±¡: { foo: \\\"bar\\\", x: 42 }\\n\\nconst mergedObj = { ...obj1, ...obj2 }; // åˆå¹¶åçš„å¯¹è±¡: { foo: \\\"baz\\\", x: 42, y: 13 } æœ‰äº›æ—¶å€™æˆ‘ä»¬åœ¨è§£æ„ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå¯èƒ½åªå…³å¿ƒå®ƒçš„å…¶ä¸­ä¸€ä¸¤ä¸ªå±æ€§ï¼Œè¿™ä¸ªæ—¶å€™ Rest è¯­æ³•å¯ä»¥æå¤§ç®€åŒ–å˜é‡æå–è¿‡ç¨‹ã€‚ const { x, y, ...z } = { x: 1, y: 2, a: 3, b: 4 }; x; // 1 y; // 2\\n\\nè¯­æ³• Rest const { x, y, ...z } = { x: 1, y: 2, a: 3, b: 4 }; x; // 1 y; // 2 z; // { a: 3, b: 4 } Spread let n = { x, y, ...z }; n; // { x: 1, y: 2, a: 3, b: 4 }\\n\\næ³¨æ„äº‹é¡¹ Object.assign() å‡½æ•°ä¼šè§¦å‘ settersï¼Œè€Œ Spread è¯­æ³•åˆ™ä¸ä¼šã€‚\\n\\nES10ï¼ˆES2019ï¼‰\\n\\n1ã€Array.prototype.flat å’Œ Array.prototype.flatMap\\n\\næ¦‚è¿°\\n\\nflat() æ–¹æ³•ä¼šæŒ‰ç…§ä¸€ä¸ªå¯æŒ‡å®šçš„æ·±åº¦é€’å½’éå†æ•°ç»„ï¼Œå¹¶å°†æ‰€æœ‰å…ƒç´ ä¸éå†åˆ°çš„å­æ•°ç»„ä¸­çš„å…ƒç´ åˆå¹¶ä¸ºä¸€ä¸ªæ–°æ•°ç»„è¿”å›ã€‚ flatMap() æ–¹æ³•é¦–å…ˆä½¿ç”¨æ˜ å°„å‡½æ•°æ˜ å°„æ¯ä¸ªå…ƒç´ ï¼Œç„¶åå°†ç»“æœå‹ç¼©æˆä¸€ä¸ªæ–°æ•°ç»„ã€‚ flatMap æ–¹æ³•ä¸ map æ–¹æ³•ç»“åˆæ·±åº¦ depth ä¸º 1 çš„ flat å‡ ä¹ç›¸åŒã€‚ è¯¥ææ¡ˆç›®å‰å¤„äº Stage 4 é˜¶æ®µã€‚ TC39 ç›´é€šè½¦\\n\\nåŠ¨æœº å¦‚æœæˆ‘ä»¬æƒ³æ‰å¹³åŒ–ä¸€ä¸ªå¤šå±‚åµŒå¥—çš„æ•°ç»„ï¼Œä»£ç å¦‚ä¸‹ï¼š // ä½¿ç”¨ reduceã€concat å’Œé€’å½’å±•å¼€æ— é™å¤šå±‚åµŒå¥—çš„æ•°ç»„ const arr = \\\\[1, 2, 3, \\\\[1, 2, 3, 4, \\\\[2, 3, 4\\\\]\\\\]\\\\];\\n\\nfunction flatDeep(arr, d = 1) { return d > 0 ? arr.reduce((acc, val) => acc.concat(Array.isArray(val) ? flatDeep(val, d - 1) : val), \\\\[\\\\]) : arr.slice(); };\\n\\nflatDeep(arr, Infinity); // \\\\[1, 2, 3, 1, 2, 3, 4, 2, 3, 4\\\\] flat ææ¡ˆæ­£æ˜¯ç”¨æ¥ç®€åŒ–è¿™ä¸ªæµç¨‹ï¼š const arr = \\\\[1, 2, 3, \\\\[1, 2, 3, 4, \\\\[2, 3, 4\\\\]\\\\]\\\\]; arr.flat(Infinity); // \\\\[1, 2, 3, 1, 2, 3, 4, 2, 3, 4\\\\] å¦‚æœæˆ‘ä»¬æƒ³å°†åŒ…å«å‡ å¥è¯çš„æ•°ç»„æ‹†åˆ†æˆå•ä¸ªè¯ç»„æˆçš„æ–°æ•°ç»„ï¼Œä»£ç å¦‚ä¸‹ï¼š const arr = \\\\[\\\"it's Sunny in\\\", \\\"\\\", \\\"California\\\"\\\\]; const arr1 = arr.map(x => x.split(\\\" \\\")); // \\\\[\\\\[\\\"it's\\\",\\\"Sunny\\\",\\\"in\\\"\\\\],\\\\[\\\"\\\"\\\\],\\\\[\\\"California\\\"\\\\]\\\\]; arr1.flat(2); // \\\\[\\\"it's\\\", \\\"Sunny\\\", \\\"in\\\", \\\"\\\", \\\"California\\\"\\\\] flatMap ææ¡ˆå¯ä»¥ç”¨æ¥ç®€åŒ–è¯¥æµç¨‹ï¼š const arr = \\\\[\\\"it's Sunny in\\\", \\\"\\\", \\\"California\\\"\\\\]; arr.flatMap(x => x.split(\\\" \\\")); // \\\\[\\\"it's\\\", \\\"Sunny\\\", \\\"in\\\", \\\"\\\", \\\"California\\\"\\\\]\\n\\nè¯­æ³•\\n\\narr.flat(\\\\[depth\\\\])\\n\\ndepthï¼šå¯é€‰çš„ã€‚æŒ‡å®šè¦æå–åµŒå¥—æ•°ç»„çš„ç»“æ„æ·±åº¦ï¼Œé»˜è®¤å€¼ä¸º 1ã€‚\\n\\nä¾‹å­ï¼š \\\\[1,Â 2,Â \\\\[3,Â 4\\\\]\\\\].flat(1);Â  //Â \\\\[1,Â 2,Â 3,Â 4\\\\]\\n\\n\\\\[1,Â 2,Â \\\\[3,Â 4, \\\\[5, 6\\\\]\\\\]\\\\].flat(2);Â  // \\\\[1, 2, 3, 4, 5, 6\\\\]\\n\\n\\\\[1,Â 2,Â \\\\[3,Â 4, \\\\[5, 6\\\\]\\\\]\\\\].flat(Infinity);Â  // \\\\[1, 2, 3, 4, 5, 6\\\\]\\n\\narr.flatMap( function callback( currentValue\\\\[, index\\\\[, array\\\\]\\\\]) { // return element for new_array }\\\\[, thisArg\\\\])\\n\\ncallbackï¼šå¯ä»¥ç”Ÿæˆä¸€ä¸ªæ–°æ•°ç»„ä¸­çš„å…ƒç´ çš„å‡½æ•°ï¼Œå¯ä»¥ä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼š\\n\\ncurrentValueï¼šå½“å‰æ­£åœ¨æ•°ç»„ä¸­å¤„ç†çš„å…ƒç´ ã€‚\\n\\nindexï¼šå¯é€‰çš„ã€‚æ•°ç»„ä¸­æ­£åœ¨å¤„ç†çš„å½“å‰å…ƒç´ çš„ç´¢å¼•ã€‚\\n\\narrayï¼šå¯é€‰çš„ã€‚æ•°ç»„ä¸­æ­£åœ¨å¤„ç†çš„å½“å‰å…ƒç´ çš„ç´¢å¼•ã€‚\\n\\nthisArgï¼šå¯é€‰çš„ã€‚æ‰§è¡Œ callback å‡½æ•°æ—¶ ä½¿ç”¨çš„ this å€¼ã€‚\\n\\nä¾‹å­ï¼š \\\\[1,Â 2,Â 3,Â 4\\\\].flatMap(aÂ =>Â \\\\[a \\\\*\\\\* 2\\\\]);Â  //Â \\\\[1,Â 4,Â 9,Â 16\\\\] map() ä¸ flatMap() const arr1 = \\\\[1, 2, 3, 4\\\\];\\n\\narr1.map(x => \\\\[x \\\\* 2\\\\]); // \\\\[\\\\[2\\\\], \\\\[4\\\\], \\\\[6\\\\], \\\\[8\\\\]\\\\]\\n\\narr1.flatMap(x => \\\\[x \\\\* 2\\\\]); // \\\\[2, 4, 6, 8\\\\]\\n\\narr1.map(x => \\\\[x \\\\* 2\\\\]).flat(1); // \\\\[2, 4, 6, 8\\\\]\\n\\n// only one level is flattened arr1.flatMap(x => \\\\[\\\\[x \\\\* 2\\\\]\\\\]); // \\\\[\\\\[2\\\\], \\\\[4\\\\], \\\\[6\\\\], \\\\[8\\\\]\\\\] let arr1 = \\\\[\\\"it's Sunny in\\\", \\\"\\\", \\\"California\\\"\\\\];\\n\\narr1.map(x => x.split(\\\" \\\")); // \\\\[\\\\[\\\"it's\\\",\\\"Sunny\\\",\\\"in\\\"\\\\],\\\\[\\\"\\\"\\\\],\\\\[\\\"California\\\"\\\\]\\\\]\\n\\narr1.flatMap(x => x.split(\\\" \\\")); // \\\\[\\\"it's\\\",\\\"Sunny\\\",\\\"in\\\", \\\"\\\", \\\"California\\\"\\\\]\\n\\n2ã€Object.fromEntries\\n\\næ¦‚è¿°\\n\\nObject.fromEntries() æ–¹æ³•æŠŠé”®å€¼å¯¹åˆ—è¡¨è½¬æ¢ä¸ºä¸€ä¸ªå¯¹è±¡ã€‚ Object.fromEntries() æ‰§è¡Œä¸ Object.entries äº’é€†çš„æ“ä½œã€‚ è¯¥ææ¡ˆç›®å‰å¤„äº Stage 4 é˜¶æ®µã€‚ TC39 ç›´é€šè½¦\\n\\nåŠ¨æœº const obj = { foo: true, bar: false }; const map = new Map(Object.entries(obj)); å¦‚æœè¦å°†ç±»ä¼¼ä¸Šé¢ä»£ç ä¸­çš„ map å†è½¬æ¢ä¸º objï¼Œæˆ‘ä»¬ä¸å¾—ä¸ç¼–å†™å¸®åŠ©å‡½æ•°ï¼š const obj = Array.from(map).reduce((acc, \\\\[key, val\\\\]) => Object.assign(acc, { \\\\[key\\\\]: val }), {}); Object.fromEntries ææ¡ˆæ­£æ˜¯ç”¨æ¥ç®€åŒ–è¿™ä¸ªæµç¨‹ã€‚\\n\\nè¯­æ³•\\n\\nObject.fromEntries(iterable);\\n\\niterableï¼šç±»ä¼¼ Arrayã€Map æˆ–è€…å…¶å®ƒå®ç°äº†å¯è¿­ä»£åè®®çš„å¯è¿­ä»£å¯¹è±¡ã€‚\\n\\nä¾‹å­ï¼š åµŒå¥—æ•°ç»„ const obj = Object.fromEntries(\\\\[\\\\['a', 0\\\\], \\\\['b', 1\\\\]\\\\]); // { a: 0, b: 1 } Object.entries const obj = { abc: 1, def: 2, ghij: 3 }; const res = Object.fromEntries( Object.entries(obj) .filter((\\\\[key, val\\\\]) => key.length === 3) .map((\\\\[key, val\\\\]) => \\\\[key, val \\\\* 2\\\\]) ); // { abc: 2, def: 4 } é€šè¿‡Â Object.fromEntriesï¼Œå¯ä»¥å°†Â MapÂ è½¬åŒ–ä¸ºÂ Objectï¼š const map = new Map(\\\\[\\\\['a', 1\\\\], \\\\['b', 2\\\\], \\\\['c', 3\\\\]\\\\]); const obj = Object.fromEntries(map); // { a: 1, b: 2, c: 3 }\\n\\n3ã€String.prototype.trimStart å’Œ String.prototype.trimEnd\\n\\næ¦‚è¿°\\n\\nå»é™¤å­—ç¬¦ä¸²é¦–å°¾çš„è¿ç»­ç©ºç™½ç¬¦ã€‚ trimStart() æ–¹æ³•ä»å­—ç¬¦ä¸²çš„å¼€å¤´åˆ é™¤ç©ºç™½ç¬¦ã€‚trimLeft() æ˜¯æ­¤æ–¹æ³•çš„åˆ«åã€‚ trimEnd() æ–¹æ³•ä»å­—ç¬¦ä¸²çš„ç»“å°¾åˆ é™¤ç©ºç™½ç¬¦ã€‚trimRight() æ˜¯æ­¤æ–¹æ³•çš„åˆ«åã€‚ è¯¥ææ¡ˆç›®å‰å¤„äº Stage 4 é˜¶æ®µã€‚ TC39 ç›´é€šè½¦\\n\\nåŠ¨æœº ES5 æ ‡å‡†åŒ–äº† String.prototype.trimã€‚ æ‰€æœ‰ä¸»è¦æœç´¢å¼•æ“ä¹Ÿå®ç°äº†ç›¸åº”çš„ trimLeft å’Œ trimRight åŠŸèƒ½ï¼Œä½†æ˜¯æ— ä»»ä½•æ ‡å‡†è§„èŒƒã€‚ ä¸ºäº†ä¸ padStart/padEnd ä¿æŒä¸€è‡´ï¼Œæ‰€ä»¥æè®®ä½¿ç”¨ trimStart å’Œ trimEndã€‚ è€ƒè™‘åˆ°ä¸åŒæµè§ˆå™¨çš„å…¼å®¹æ€§é—®é¢˜ï¼ŒtrimLeft/trimRight å°†ä½œä¸º trimStart/trimEnd çš„åˆ«åä½¿ç”¨ã€‚ String.prototype.trimLeft === String.prototype.trimStart; // true String.prototype.trimRight === String.prototype.trimEnd; // true\\n\\nè¯­æ³• const greeting = '   Hello world!   '; console.log(greeting.trimStart()); // \\\"Hello world!   \\\"; console.log(greeting.trimEnd()); // \\\"   Hello world!\\\";\\n\\n4ã€Optional Catch Binding\\n\\næ¦‚è¿°\\n\\nè¯¥ææ¡ˆå¯¹ ECMAScript è¿›è¡Œäº†è¯­æ³•æ›´æ”¹ï¼Œå…è®¸åœ¨ä¸ä½¿ç”¨ catch ç»‘å®šçš„æƒ…å†µä¸‹çœç•¥ catch ç»‘å®šã€‚ è¯¥ææ¡ˆç›®å‰å¤„äº Stage 4 é˜¶æ®µã€‚ TC39 ç›´é€šè½¦\\n\\nåŠ¨æœº try { // try to use a web feature which may not be implemented } catch (unused) { // fall back to a less desirable web feature with broader support } let isTheFeatureImplemented = false; try { // stress the required bits of the web API isTheFeatureImplemented = true; } catch (unused) {} æ™®éè®¤ä¸ºï¼Œå£°æ˜æˆ–å†™å…¥ä»æœªè¯»å–çš„å˜é‡ä¼šå¼•å‘ç¨‹åºé”™è¯¯ã€‚\\n\\nè¯­æ³• try { // ... } catch { // ... }\\n\\n5ã€Symbol.prototype.description\\n\\næ¦‚è¿°\\n\\nSymbol å¯¹è±¡å¯ä»¥é€šè¿‡ä¸€ä¸ªå¯é€‰çš„æè¿°åˆ›å»ºï¼Œå¯ç”¨äºè°ƒè¯•ï¼Œä½†ä¸èƒ½ç”¨äºè®¿é—® symbol æœ¬èº«ã€‚ Symbol.prototype.description å±æ€§å¯ä»¥ç”¨äºè¯»å–è¯¥æè¿°ã€‚ä¸ Symbol.prototype.toString() ä¸åŒçš„æ˜¯å®ƒä¸ä¼šåŒ…å« \\\"Symbol()\\\" çš„å­—ç¬¦ä¸²ã€‚ description æ˜¯ä¸€ä¸ªåªè¯»å±æ€§ï¼Œå®ƒä¼šè¿”å› Symbol å¯¹è±¡çš„å¯é€‰æè¿°çš„å­—ç¬¦ä¸²ã€‚ è¯¥ææ¡ˆç›®å‰å¤„äº Stage 4 é˜¶æ®µã€‚ TC39 ç›´é€šè½¦\\n\\nåŠ¨æœº ç›´æ¥æš´éœ² symbol çš„ description å†…éƒ¨æ’æ§½ï¼Œå–ä»£é€šè¿‡ symbol.prototype.toString é—´æ¥æš´éœ²ã€‚\\n\\nè¯­æ³• Symbol('myDescription').description;\\n\\nSymbol.iterator.description;\\n\\nSymbol.for('foo').description; ä¾‹å­ï¼š Symbol('desc').toString();  // \\\"Symbol(desc)\\\" Symbol('desc').description; // \\\"desc\\\" Symbol('').description;     // \\\"\\\" Symbol().description;       // undefined\\n\\n// well-known symbols Symbol.iterator.toString();  // \\\"Symbol(Symbol.iterator)\\\" Symbol.iterator.description; // \\\"Symbol.iterator\\\"\\n\\n// global symbols Symbol.for('foo').toString();  // \\\"Symbol(foo)\\\" Symbol.for('foo').description; // \\\"foo\\\"\\n\\nES11ï¼ˆES2020ï¼‰\\n\\n1ã€String.prototype.matchAll\\n\\næ¦‚è¿°\\n\\nmatchAll() æ–¹æ³•è¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„ç»“æœåŠåˆ†ç»„æ•è·ç»„çš„è¿­ä»£å™¨ã€‚ TC39 ç›´é€šè½¦\\n\\nåŠ¨æœº ä¹‹å‰ï¼Œå¦‚æœæˆ‘ä»¬è¦è·å–æ‰€æœ‰åŒ¹é…é¡¹ä¿¡æ¯ï¼Œåªèƒ½é€šè¿‡å¾ªç¯è°ƒç”¨ regexp.exec()ï¼ˆ regexp éœ€ä½¿ç”¨ /g æ ‡å¿—ï¼‰ï¼š const regexp = RegExp('foo\\\\[a-z\\\\]\\\\*', 'g'); const str = 'table football, foosball'; let match;\\n\\nwhile ((match = regexp.exec(str)) !== null) { console.log(`Found ${match[0]} start = ${match.index} end = ${regexp.lastIndex}.`); // expected output: \\\"Found football start=6 end=14.\\\" // expected output: \\\"Found foosball start=16 end=24.\\\" } å¦‚æœä½¿ç”¨ matchAllï¼Œå°±å¯ä»¥ä¸å¿…ä½¿ç”¨ while å¾ªç¯åŠ  exec æ–¹å¼ï¼ˆä¸”æ­£åˆ™è¡¨è¾¾å¼éœ€ä½¿ç”¨ /g æ ‡å¿—ï¼‰ã€‚ä½¿ç”¨ matchAll ä¼šå¾—åˆ°ä¸€ä¸ªè¿­ä»£å™¨çš„è¿”å›å€¼ï¼Œé…åˆ for...ofã€array spread æˆ–è€… Array.from() å¯ä»¥æ›´æ–¹ä¾¿å®ç°åŠŸèƒ½ã€‚\\n\\nè¯­æ³•\\n\\nstr.matchAll(regexp)\\n\\nregexpï¼šæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ã€‚å¦‚æœæ‰€ä¼ å‚æ•°ä¸æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ï¼Œåˆ™ä¼šéšå¼åœ°ä½¿ç”¨ new RegExp(obj) å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ª RegExp\\n\\nRegExp å¿…é¡»æ˜¯è®¾ç½®äº†å…¨å±€æ¨¡å¼ /g çš„å½¢å¼ï¼Œå¦åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ TypeErrorã€‚ ä¾‹å­ï¼š const regexp = RegExp('foo\\\\[a-z\\\\]\\\\*', 'g'); const str = 'table football, foosball'; const matches = str.matchAll(regexp);\\n\\nfor (const match of matches) { console.log(`Found ${match[0]} start = ${match.index} end = ${match.index + match[0].length}.`); } // expected output: \\\"Found football start=6 end=14.\\\" // expected output: \\\"Found foosball start=16 end=24.\\\"\\n\\n// matches iterator is exhausted after the for..of iteration // Call matchAll again to create a new iterator Array.from(str.matchAll(regexp), m => m\\\\[0\\\\]); // Array \\\\[ \\\"football\\\", \\\"foosball\\\" \\\\]\\n\\næ³¨æ„äº‹é¡¹ 1ã€å¦‚æœæ²¡æœ‰ /g æ ‡å¿—ï¼ŒmatchAll ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ const regexp = RegExp('\\\\[a-c\\\\]', ''); const str = 'abc'; Array.from(str.matchAll(regexp), m => m\\\\[0\\\\]); // TypeError: String.prototype.matchAll called with a non-global RegExp argument 2ã€matchAll å†…éƒ¨åšäº†ä¸€ä¸ª regexp çš„å¤åˆ¶ï¼Œæ‰€ä»¥ä¸åƒ regexp.execï¼ŒlastIndex åœ¨å­—ç¬¦ä¸²æ‰«ææ—¶ä¸ä¼šæ”¹å˜ã€‚ const regexp = RegExp('\\\\[a-c\\\\]', 'g'); regexp.lastIndex = 1; const str = 'abc'; Array.from(str.matchAll(regexp), m => `${regexp.lastIndex} ${m[0]}`); // Array \\\\[ \\\"1 b\\\", \\\"1 c\\\" \\\\] 3ã€matchAll çš„å¦å¤–ä¸€ä¸ªäº®ç‚¹æ˜¯æ›´å¥½åœ°è·å–æ•è·ç»„ã€‚å› ä¸ºå½“ä½¿ç”¨ match() å’Œ /g æ ‡å¿—æ–¹å¼è·å–åŒ¹é…ä¿¡æ¯æ—¶ï¼Œæ•è·ç»„ä¼šè¢«å¿½ç•¥ï¼š const regexp = /t(e)(st(\\\\\\\\d?))/g; const str = 'test1test2';\\n\\nstr.match(regexp); // Array \\\\['test1', 'test2'\\\\] ä½¿ç”¨ matchAll å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼è·å–åˆ†ç»„æ•è·ï¼š let array = \\\\[...str.matchAll(regexp)\\\\];\\n\\narray\\\\[0\\\\]; // \\\\['test1', 'e', 'st1', '1', index: 0, input: 'test1test2', length: 4\\\\] array\\\\[1\\\\]; // \\\\['test2', 'e', 'st2', '2', index: 5, input: 'test1test2', length: 4\\\\]\\n\\n2ã€Dynamic Import\\n\\næ¦‚è¿°\\n\\nåŠ¨æ€å¯¼å…¥æ¨¡å— è¯¥ææ¡ˆç›®å‰å¤„äº Stage 4 é˜¶æ®µã€‚ TC39 ç›´é€šè½¦\\n\\nåŠ¨æœº æ ‡å‡†ç”¨æ³•çš„ import å¯¼å…¥çš„æ¨¡å—æ˜¯é™æ€çš„ï¼Œä¼šä½¿æ‰€æœ‰è¢«å¯¼å…¥çš„æ¨¡å—ï¼Œåœ¨åŠ è½½æ—¶å°±è¢«ç¼–è¯‘ï¼ˆæ— æ³•åšåˆ°æŒ‰éœ€ç¼–è¯‘ï¼Œé™ä½é¦–é¡µåŠ è½½é€Ÿåº¦ï¼‰ã€‚æœ‰äº›åœºæ™¯ä¸­ï¼Œä½ å¯èƒ½å¸Œæœ›æ ¹æ®æ¡ä»¶å¯¼å…¥æ¨¡å—æˆ–è€…æŒ‰éœ€å¯¼å…¥æ¨¡å—ï¼Œè¿™æ—¶ä½ å¯ä»¥ä½¿ç”¨åŠ¨æ€å¯¼å…¥ä»£æ›¿é™æ€å¯¼å…¥ã€‚ä¸‹é¢çš„æ˜¯ä½ å¯èƒ½ä¼šéœ€è¦åŠ¨æ€å¯¼å…¥çš„åœºæ™¯ï¼š\\n\\nå½“é™æ€å¯¼å…¥çš„æ¨¡å—å¾ˆæ˜æ˜¾çš„é™ä½äº†ä»£ç çš„åŠ è½½é€Ÿåº¦ä¸”è¢«ä½¿ç”¨çš„å¯èƒ½æ€§å¾ˆä½ï¼Œæˆ–è€…å¹¶ä¸éœ€è¦é©¬ä¸Šä½¿ç”¨å®ƒã€‚ å½“é™æ€å¯¼å…¥çš„æ¨¡å—å¾ˆæ˜æ˜¾çš„å ç”¨äº†å¤§é‡ç³»ç»Ÿå†…å­˜ä¸”è¢«ä½¿ç”¨çš„å¯èƒ½æ€§å¾ˆä½ã€‚ å½“è¢«å¯¼å…¥çš„æ¨¡å—ï¼Œåœ¨åŠ è½½æ—¶å¹¶ä¸å­˜åœ¨ï¼Œéœ€è¦å¼‚æ­¥è·å–ã€‚ å½“å¯¼å…¥æ¨¡å—çš„è¯´æ˜ç¬¦ï¼Œéœ€è¦åŠ¨æ€æ„å»ºã€‚ï¼ˆé™æ€å¯¼å…¥åªèƒ½ä½¿ç”¨é™æ€è¯´æ˜ç¬¦ï¼‰ã€‚ å½“è¢«å¯¼å…¥çš„æ¨¡å—æœ‰å‰¯ä½œç”¨ï¼ˆè¿™é‡Œè¯´çš„å‰¯ä½œç”¨ï¼Œå¯ä»¥ç†è§£ä¸ºæ¨¡å—ä¸­ä¼šç›´æ¥è¿è¡Œçš„ä»£ç ï¼‰ï¼Œè¿™äº›å‰¯ä½œç”¨åªæœ‰åœ¨è§¦å‘äº†æŸäº›æ¡ä»¶æ‰è¢«éœ€è¦æ—¶ã€‚ï¼ˆåŸåˆ™ä¸Šæ¥è¯´ï¼Œæ¨¡å—ä¸èƒ½æœ‰å‰¯ä½œç”¨ï¼Œä½†æ˜¯å¾ˆå¤šæ—¶å€™ï¼Œä½ æ— æ³•æ§åˆ¶ä½ æ‰€ä¾èµ–çš„æ¨¡å—çš„å†…å®¹ï¼‰ã€‚\\n\\nè¯­æ³•\\n\\nimport()\\n\\nå…³é”®å­— import å¯ä»¥åƒè°ƒç”¨å‡½æ•°ä¸€æ ·æ¥åŠ¨æ€çš„å¯¼å…¥æ¨¡å—ã€‚ä»¥è¿™ç§æ–¹å¼è°ƒç”¨ï¼Œå°†è¿”å›ä¸€ä¸ª promiseã€‚ ä¾‹å­ï¼š import('/modules/my-module.js') .then((module) => { // Do something with the module. }); ä¹Ÿæ”¯æŒ await å…³é”®å­— const module = await import('/modules/my-module.js'); æ¨¡æ¿å­—ç¬¦ä¸²å½¢å¼ const main = document.querySelector(\\\"main\\\"); for (const link of document.querySelectorAll(\\\"nav > a\\\")) { link.addEventListener(\\\"click\\\", e => { e.preventDefault(); import(`./section-modules/${link.dataset.entryModule}.js`) .then(module => { module.loadPageInto(main); }) .catch(err => { main.textContent = err.message; }); }); }\\n\\næ³¨æ„äº‹é¡¹ è¯·ä¸è¦æ»¥ç”¨åŠ¨æ€å¯¼å…¥ï¼ˆåªæœ‰åœ¨å¿…è¦æƒ…å†µä¸‹é‡‡ç”¨ï¼‰ã€‚ é™æ€æ¡†æ¶èƒ½æ›´å¥½åœ°åˆå§‹åŒ–ä¾èµ–ï¼Œè€Œä¸”æ›´æœ‰åˆ©äºé™æ€åˆ†æå·¥å…·å’Œ tree shaking å‘æŒ¥ä½œç”¨ã€‚ ä¸é™æ€ import å·®å¼‚ï¼š\\n\\nimport() å¯ä»¥ä»è„šæœ¬ä¸­ä½¿ç”¨ï¼Œè€Œä¸ä»…ä»…æ˜¯ä»æ¨¡å—ä¸­ä½¿ç”¨ã€‚ å¦‚æœ import() åœ¨æ¨¡å—ä¸­ä½¿ç”¨ï¼Œå®ƒå¯ä»¥å‡ºç°åœ¨ä»»ä½•çº§åˆ«çš„ä»»ä½•åœ°æ–¹ï¼Œå¹¶ä¸”ä¸ä¼šè¢«æå‡ã€‚\\n\\nimport() æ¥å—ä»»æ„å­—ç¬¦ä¸²ï¼ˆæ­¤å¤„æ˜¾ç¤ºäº†è¿è¡Œæ—¶ç¡®å®šçš„æ¨¡æ¿å­—ç¬¦ä¸²ï¼‰ï¼Œè€Œä¸ä»…ä»…æ˜¯é™æ€å­—ç¬¦ä¸²æ–‡å­—ã€‚ æ¨¡å—ä¸­å­˜åœ¨ import() å¹¶ä¸ä¼šå»ºç«‹ä¾èµ–å…³ç³»ï¼Œåœ¨å¯¹åŒ…å«çš„æ¨¡å—æ±‚å€¼ä¹‹å‰ï¼Œå¿…é¡»å…ˆè·å–å¹¶æ±‚å€¼ä¾èµ–å…³ç³»ã€‚\\n\\nimport() ä¸å»ºç«‹å¯ä»¥é™æ€åˆ†æçš„ä¾èµ–å…³ç³»ï¼ˆä½†æ˜¯ï¼Œåœ¨è¯¸å¦‚ import('./foo.js') è¿™æ ·çš„ç®€å•æƒ…å†µä¸‹ï¼Œå®ç°å¯èƒ½ä»ç„¶èƒ½å¤Ÿæ‰§è¡Œæ¨æµ‹æ€§æŠ“å–ï¼‰ã€‚\\n\\n3ã€import.meta\\n\\næ¦‚è¿°\\n\\nimport.meta æ˜¯ä¸€ä¸ªç»™ JavaScript æ¨¡å—æš´éœ²ç‰¹å®šä¸Šä¸‹æ–‡çš„å…ƒæ•°æ®å±æ€§çš„å¯¹è±¡ã€‚å®ƒåŒ…å«äº†è¿™ä¸ªæ¨¡å—çš„ä¿¡æ¯ï¼Œæ¯”å¦‚è¯´è¿™ä¸ªæ¨¡å—çš„ URLã€‚ è¯¥ææ¡ˆç›®å‰å¤„äº Stage 4 é˜¶æ®µã€‚ TC39 ç›´é€šè½¦\\n\\nåŠ¨æœº é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸»æœºç¯å¢ƒå¯ä»¥æä¾›æœ‰ç”¨çš„æ¨¡å—ç‰¹å®šä¿¡æ¯ï¼Œä»¥ä¾¿åœ¨æ¨¡å—å†…è¿›è¡Œä»£ç è¯„ä¼°ã€‚ä»¥ä¸‹æ˜¯å‡ ä¸ªä¾‹å­ã€‚ æ¨¡å—çš„ URL æˆ– æ–‡ä»¶å è¿™æ˜¯åœ¨ Node.js çš„ CommonJS æ¨¡å—ç³»ç»Ÿä¸­é€šè¿‡ä½œç”¨åŸŸå†… __filename å˜é‡ï¼ˆåŠå…¶å¯¹åº”çš„ __dirname ï¼‰æä¾›çš„ã€‚è¿™å…è®¸é€šè¿‡ä»£ç è½»æ¾è§£æç›¸å¯¹äºæ¨¡å—æ–‡ä»¶çš„èµ„æºï¼Œä¾‹å¦‚ï¼š const fs = require(\\\"fs\\\"); const path = require(\\\"path\\\"); const bytes = fs.readFileSync(path.resolve(__dirname, \\\"data.bin\\\")); å¦‚æœæ²¡æœ‰å¯ç”¨çš„ _dirnameï¼Œåƒ fs.readFileSync('data.bin') è¿™æ ·çš„ä»£ç å°†è§£æç›¸å¯¹äºå½“å‰å·¥ä½œç›®å½•çš„ data.binã€‚è¿™å¯¹äºåº“ä½œè€…æ¥è¯´é€šå¸¸æ˜¯æ²¡æœ‰ç”¨çš„ï¼Œå› ä¸ºä»–ä»¬å°†è‡ªå·±çš„èµ„æºä¸æ¨¡å—æ†ç»‘åœ¨ä¸€èµ·ï¼Œè¿™äº›æ¨¡å—å¯ä»¥ä½äºä¸ CWD ç›¸å…³çš„ä»»ä½•ä½ç½®ã€‚ æµè§ˆå™¨ä¸­ä¹Ÿå­˜åœ¨ç›¸ä¼¼çš„è¡Œä¸ºï¼Œå°†æ–‡ä»¶åæ›¿æ¢ä¸º URLã€‚ scrpit æ ‡ç­¾å¼•å…¥èµ„æº <script data-option=\\\"value\\\" src=\\\"library.js\\\"></script>\\n\\n// è·å– data-option çš„å€¼å¦‚ä¸‹ const theOption = document.currentScript.dataset.option; ä¸ºæ­¤ä½¿ç”¨ï¼ˆæœ‰æ•ˆçš„ï¼‰å…¨å±€å˜é‡è€Œä¸æ˜¯è¯æ³•èŒƒå›´çš„å€¼çš„æœºåˆ¶æ˜¯æœ‰é—®é¢˜çš„ï¼Œå› ä¸ºè¿™æ„å‘³ç€è¯¥å€¼ä»…è®¾ç½®åœ¨é¡¶çº§ï¼Œå¹¶ä¸”å¿…é¡»ä¿å­˜åœ¨é‚£é‡Œæ‰èƒ½ç”¨äºä»»ä½•å¼‚æ­¥ä»£ç ã€‚ mainModule åœ¨ Node.js ä¸­ï¼Œé€šå¸¸çš„åšæ³•æ˜¯é€šè¿‡ä»¥ä¸‹ä»£ç æ¥ç¡®å®šæ‚¨æ˜¯ç¨‹åºçš„ main æ¨¡å—è¿˜æ˜¯ entry æ¨¡å—ï¼š if (module === process.mainModule) { // run tests for this library, or provide a CLI interface, or similar } ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒå…è®¸å•ä¸ªæ–‡ä»¶åœ¨å¯¼å…¥æ—¶ç”¨ä½œåº“ï¼Œæˆ–è€…åœ¨ç›´æ¥è¿è¡Œæ—¶ç”¨ä½œå‰¯ä½œç”¨ç¨‹åºã€‚ è¯·æ³¨æ„ï¼Œæ­¤ç‰¹å®šå…¬å¼å¦‚ä½•ä¾èµ–äºå°†ä¸»æœºæä¾›çš„ä½œç”¨åŸŸå€¼æ¨¡å—ä¸ä¸»æœºæä¾›çš„å…¨å±€å€¼ process.mainModule è¿›è¡Œæ¯”è¾ƒã€‚ å…¶ä»–å¯è®¾æƒ³çš„æƒ…å†µ\\n\\nå…¶ä»– Node.js æ–¹æ³•ï¼Œå¦‚ module.children æˆ– require.resolve()\\n\\nå…³äºæ¨¡å—æ‰€å± package çš„ä¿¡æ¯ï¼Œæˆ–è€…é€šè¿‡ Node.js çš„ package.json æˆ– web package\\n\\næŒ‡å‘åµŒå…¥åœ¨ HTML æ¨¡å—ä¸­çš„ JavaScript æ¨¡å—çš„åŒ…å« DocumentFragment çš„æŒ‡é’ˆ\\n\\nè¯­æ³•\\n\\nimport.meta\\n\\nimport.meta å¯¹è±¡ç”±ä¸€ä¸ªå…³é”®å­— importï¼Œä¸€ä¸ªç‚¹ç¬¦å·å’Œä¸€ä¸ª meta å±æ€§åç»„æˆã€‚é€šå¸¸æƒ…å†µä¸‹ import. æ˜¯ä½œä¸ºä¸€ä¸ªå±æ€§è®¿é—®çš„ä¸Šä¸‹æ–‡ï¼Œä½†æ˜¯åœ¨è¿™é‡Œ import ä¸æ˜¯ä¸€ä¸ªçœŸæ­£çš„å¯¹è±¡ã€‚ import.meta å¯¹è±¡å¸¦æœ‰ä¸€ä¸ª null çš„åŸå‹å¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡å¯ä»¥æ‰©å±•ï¼Œå¹¶ä¸”å®ƒçš„å±æ€§éƒ½æ˜¯å¯å†™ï¼Œå¯é…ç½®å’Œå¯æšä¸¾çš„ã€‚ ä¾‹å­ï¼š ä»¥ä¸‹ä»£ç ä½¿ç”¨äº†æˆ‘ä»¬æ·»åŠ åˆ° import.meta ä¸­çš„ä¸¤ä¸ªå±æ€§ï¼š (async () => { const response = await fetch(new URL(\\\"../hamsters.jpg\\\", import.meta.url)); const blob = await response.blob();\\n\\nconst size = import.meta.scriptElement.dataset.size || 300;\\n\\nconst image = new Image(); image.src = URL.createObjectURL(blob); image.width = image.height = size;\\n\\ndocument.body.appendChild(image); })(); å½“è¿™ä¸ªæ¨¡å—è¢«åŠ è½½æ—¶ï¼Œæ— è®ºå®ƒçš„ä½ç½®å¦‚ä½•ï¼Œå®ƒéƒ½ä¼šåŠ è½½ hamsters.jpg æ–‡ä»¶ï¼Œå¹¶æ˜¾ç¤ºå›¾åƒã€‚å¯ä»¥ä½¿ç”¨ç”¨äºå¯¼å…¥å®ƒçš„è„šæœ¬å…ƒç´ æ¥é…ç½®å›¾åƒçš„å¤§å°ï¼Œä¾‹å¦‚ï¼š <script type=\\\"module\\\" src=\\\"path/to/hamster-displayer.mjs\\\" data-size=\\\"500\\\"></script>\\n\\n4ã€BigInt\\n\\næ¦‚è¿°\\n\\nåœ¨ JavaScript ä¸­ï¼ŒBigInt æ˜¯ä¸€ç§æ•°å­—ç±»å‹çš„æ•°æ®ï¼Œå®ƒå¯ä»¥è¡¨ç¤ºä»»æ„ç²¾åº¦æ ¼å¼çš„æ•´æ•°ã€‚ï¼ˆæ–°çš„åŸºæœ¬æ•°æ®ç±»å‹ï¼‰ è¯¥ææ¡ˆç›®å‰å¤„äº Stage 4 é˜¶æ®µã€‚ TC39 ç›´é€šè½¦\\n\\nåŠ¨æœº åœ¨ JavaScript ä¸­ï¼Œå½“ number å¤§äº Number.MAX_SAFE_INTEGER æ—¶ï¼Œå°±ä¼šå‘ç”Ÿç²¾åº¦ä¸¢å¤±ã€‚ const x = Number.MAX_SAFE_INTEGER; // 9007199254740991, this is 1 less than 2^53\\n\\nconst y = x + 1; // 9007199254740992, ok, checks out\\n\\nconst z = x + 2; // 9007199254740992, wait, thatâ€™s the same as above! BigInt çš„ææ¡ˆæ­£æ˜¯è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒBigInt ä½¿ Number.MAX_SAFE_INTEGER ä¸å†æ˜¯ JavaScript çš„é™åˆ¶ã€‚å®ƒå¯ä»¥è¡¨ç¤ºä»»æ„ç²¾åº¦çš„æ•´æ•°ã€‚\\n\\nè¯­æ³•\\n\\né€šè¿‡ BigInt æ–¹æ³•ï¼Œæˆ–æ˜¯åœ¨ä¸€ä¸ªæ•°å€¼åæ·»åŠ  n åç¼€ï¼Œæ¥å°†ä¸€ä¸ª Number è½¬æ¢ä¸º BigInt ç±»å‹ã€‚\\n\\nä¾‹å­ï¼š const theBiggestInt = 9007199254740991n; const alsoHuge = BigInt(9007199254740991); // 9007199254740991n const hugeButString = BigInt('9007199254740991'); // 9007199254740991n Number.MAX_SAFE_INTEGER; // 9007199254740991 Number.MAX_SAFE_INTEGER + 10 - 10; // 9007199254740990   ï¼ˆç²¾åº¦ä¸¢å¤±ï¼‰ BigInt(Number.MAX_SAFE_INTEGER) + 10n - 10n; // 9007199254740991n  ï¼ˆè®¡ç®—ç»“æœä¸º bigint ç±»å‹ï¼‰\\n\\ntypeof 9007199254740991n === \\\"bigint\\\"; // true ä½ å¯ä»¥ä½¿ç”¨ +ã€\\\\*ã€-ã€\\\\*\\\\*ã€% è¿ç®—ç¬¦ï¼Œå°±åƒåœ¨ Number ä¸­ä½¿ç”¨ä¸€æ ·ã€‚ const previousMaxSafe = BigInt(Number.MAX_SAFE_INTEGER); // 9007199254740991\\n\\nconst maxPlusOne = previousMaxSafe + 1n; // 9007199254740992n\\n\\nconst theFuture = previousMaxSafe + 2n; // 9007199254740993n, this works now!\\n\\nconst multi = previousMaxSafe \\\\* 2n; // 18014398509481982n\\n\\nconst subtr = multi â€“ 10n; // 18014398509481972n\\n\\nconst mod = multi % 10n; // 2n\\n\\nconst bigN = 2n \\\\*\\\\* 54n; // 18014398509481984n\\n\\nbigN \\\\* -1n // â€“18014398509481984n\\n\\næ³¨æ„äº‹é¡¹ 1ã€/ é™¤æ³•è¿ç®—ç¬¦ä¹Ÿå¯ä»¥ä½¿ç”¨ï¼Œä½†æ˜¯ä¼šå‘ä¸‹å–æ•´ã€‚ å› ä¸º BigInt ä¸æ˜¯ BigDecimalã€‚ const expected = 4n / 2n; // 2n const rounded = 5n / 2n;  // 2n, not 2.5n 2ã€BigInt å¹¶ä¸ä¸¥æ ¼ç­‰äº Numberã€‚ 2n === 2; // false 2n == 2;  // true 3ã€æ¯”è¾ƒè¿ç®—ç¬¦å¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚ 1n < 2;  // true 2n > 1;  // true 2 > 2;   // false 2n > 2;  // false 2n >= 2; // true 4ã€æ•°ç»„ä¸­æ··åˆ BigInt å’Œ Number å¯ä»¥æ­£å¸¸æ’åºã€‚ const mixed = \\\\[4n, 6, -12n, 10, 4, 0, 0n\\\\]; // \\\\[4n, 6, -12n, 10, 4, 0, 0n\\\\]\\n\\nmixed.sort(); // \\\\[-12n, 0, 0n, 10, 4n, 4, 6\\\\] 5ã€BigInt ä¸å¯ä»¥ä¸ Number æ··åˆè¿ç®—ã€‚ 1n + 2; // TypeError: Cannot mix BigInt and other types, use explicit conversions\\n\\n1n \\\\* 2; // TypeError: Cannot mix BigInt and other types, use explicit conversions\\n\\n5ã€Promise.allSettled\\n\\næ¦‚è¿°\\n\\nPromise.allSettled() æ–¹æ³•è¿”å›ä¸€ä¸ªåœ¨æ‰€æœ‰ç»™å®šçš„ promise éƒ½å·²ç» fulfilled æˆ– rejected åçš„ promiseï¼Œå¹¶å¸¦æœ‰ä¸€ä¸ªå¯¹è±¡æ•°ç»„ï¼Œæ¯ä¸ªå¯¹è±¡è¡¨ç¤ºå¯¹åº”çš„ promise ç»“æœã€‚ å½“æ‚¨æœ‰å¤šä¸ªå½¼æ­¤ä¸ä¾èµ–çš„å¼‚æ­¥ä»»åŠ¡æˆåŠŸå®Œæˆæ—¶ï¼Œæˆ–è€…æ‚¨æ€»æ˜¯æƒ³çŸ¥é“æ¯ä¸ª promise çš„ç»“æœæ—¶ï¼Œé€šå¸¸ä½¿ç”¨å®ƒã€‚ ç›¸æ¯”ä¹‹ä¸‹ï¼ŒPromise.all() æ›´é€‚åˆå½¼æ­¤ç›¸äº’ä¾èµ–æˆ–è€…åœ¨å…¶ä¸­ä»»ä½•ä¸€ä¸ª reject æ—¶ç«‹å³ç»“æŸã€‚ è¯¥ææ¡ˆç›®å‰å¤„äº Stage 4 é˜¶æ®µã€‚ TC39 ç›´é€šè½¦\\n\\nåŠ¨æœº\\n\\napi æè¿°\\n\\nPromise.allSettled ä¸ä¼šçŸ­è·¯ æœ¬ææ¡ˆ ğŸ†•\\n\\nPromise.all å½“å­˜åœ¨è¾“å…¥å€¼ rejected æ—¶çŸ­è·¯ åœ¨ ES2015 ä¸­æ·»åŠ  âœ…\\n\\nPromise.race å½“å­˜åœ¨è¾“å…¥å€¼ ç¨³å®š æ—¶çŸ­è·¯ åœ¨ ES2015 ä¸­æ·»åŠ  âœ…\\n\\nPromise.any å½“å­˜åœ¨è¾“å…¥å€¼ fulfilled æ—¶çŸ­è·¯ åœ¨ ES2021 ä¸­æ·»åŠ  âœ…\\n\\nå¯ä»¥çœ‹å‡ºï¼ŒPromise.allã€Promise.raceã€Promise.any éƒ½å­˜åœ¨çŸ­è·¯è¡Œä¸ºã€‚ Promise.allSettled ä¸å­˜åœ¨çŸ­è·¯è¡Œä¸ºï¼Œå®ƒç¡®ä¿æ¯ä¸ª promise éƒ½å¯ä»¥æ‰§è¡Œå®Œæ¯•ï¼Œæ— è®ºçŠ¶æ€æ˜¯ fulfilled è¿˜æ˜¯  rejectedã€‚\\n\\nè¯­æ³•\\n\\nPromise.allSettled(iterable)\\n\\niterableï¼šä¸€ä¸ªå¯è¿­ä»£çš„å¯¹è±¡ï¼Œä¾‹å¦‚ Arrayï¼Œå…¶ä¸­æ¯ä¸ªæˆå‘˜éƒ½æ˜¯ Promiseã€‚\\n\\nä¸€æ—¦æ‰€æŒ‡å®šçš„ promises é›†åˆä¸­ï¿½ï¿½ä¸€ä¸ª promise å·²ç»å®Œæˆï¼Œæ— è®ºæ˜¯æˆåŠŸçš„è¾¾æˆæˆ–è¢«æ‹’ç»ï¼Œæœªå†³è®®çš„ promise å°†è¢«å¼‚æ­¥å®Œæˆã€‚é‚£æ—¶ï¼Œæ‰€è¿”å›çš„ promise çš„å¤„ç†å™¨å°†ä¼ å…¥ä¸€ä¸ªæ•°ç»„ä½œä¸ºè¾“å…¥ï¼Œè¯¥æ•°ç»„åŒ…å«åŸå§‹ promises é›†ä¸­æ¯ä¸ª promise çš„ç»“æœã€‚ å¯¹äºæ¯ä¸ªç»“æœå¯¹è±¡ï¼Œéƒ½æœ‰ä¸€ä¸ª status å­—ç¬¦ä¸²ã€‚å¦‚æœå®ƒçš„å€¼ä¸º fulfilledï¼Œåˆ™ç»“æœå¯¹è±¡ä¸Šå­˜åœ¨ä¸€ä¸ª valueã€‚å¦‚æœå€¼ä¸º rejectedï¼Œåˆ™å­˜åœ¨ä¸€ä¸ª reasonã€‚valueï¼ˆæˆ– reasonï¼‰åæ˜ äº†æ¯ä¸ª promise å†³è®®ï¼ˆæˆ–æ‹’ç»ï¼‰çš„å€¼ã€‚ ä¾‹å­ï¼š const promise1 = Promise.resolve(3); const promise2 = new Promise((resolve, reject) => setTimeout(reject, 100, 'foo')); const promises = \\\\[promise1, promise2\\\\];\\n\\nPromise.allSettled(promises) .then((results) => results.forEach((result) => console.log(result.status)));\\n\\n// expected output: // \\\"fulfilled\\\" // \\\"rejected\\\" constÂ promise1Â =Â Promise.resolve(3); constÂ promise2Â =Â 42; constÂ promise3Â =Â newÂ Promise((resolve,Â reject)Â =>Â reject('æˆ‘æ˜¯å¤±è´¥çš„Promise_1')); constÂ promise4Â =Â newÂ Promise((resolve,Â reject)Â =>Â reject('æˆ‘æ˜¯å¤±è´¥çš„Promise_2')); constÂ promiseListÂ =Â \\\\[promise1, promise2, promise3,Â promise4\\\\]; Promise.allSettled(promiseList) .then(values => { Â Â console.log(values); });\\n\\n6ã€globalThis\\n\\næ¦‚è¿°\\n\\nå…¨å±€å±æ€§ globalThis åŒ…å«å…¨å±€çš„ this å€¼ï¼Œç±»ä¼¼äºå…¨å±€å¯¹è±¡ï¼ˆglobal objectï¼‰ã€‚ è¯¥ææ¡ˆç›®å‰å¤„äº Stage 4 é˜¶æ®µã€‚ TC39 ç›´é€šè½¦\\n\\nåŠ¨æœº ç¼–å†™è®¿é—®å…¨å±€å¯¹è±¡çš„å¯ç§»æ¤ ECMAScript ä»£ç æ˜¯å¾ˆå›°éš¾çš„ã€‚åœ¨ web ç«¯ï¼Œå¯ä»¥æ˜¯ window æˆ–è€… self æˆ–è€… this æˆ–è€… framesã€‚åœ¨ node.js ä¸­ï¼Œæ˜¯ global æˆ–è€… thisã€‚ å…¶ä¸­ï¼Œåªæœ‰ this åœ¨ V8 çš„ d8 æˆ–è€… JavaScriptCore çš„ jsc è¿™æ ·çš„ shell ä¸­å¯ç”¨ã€‚ åœ¨ sloppy æ¨¡å¼ä¸‹çš„ç‹¬ç«‹å‡½æ•°è°ƒç”¨ä¸­ï¼Œthis ä¹Ÿå¯ä»¥å·¥ä½œï¼Œä½†æ˜¯åœ¨æ¨¡å—ä¸­æˆ–åœ¨å‡½æ•°å†…çš„ä¸¥æ ¼æ¨¡å¼ä¸‹å®ƒæ˜¯ undefinedã€‚ åœ¨è¿™æ ·çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œå…¨å±€å¯¹è±¡ä»ç„¶å¯ä»¥é€šè¿‡ Function('return this')() è®¿é—®ï¼Œä½†åœ¨æŸäº› CSP è®¾ç½®ä¸­ï¼Œä¾‹å¦‚åœ¨ Chrome åº”ç”¨ç¨‹åºä¸­æ˜¯ä¸å¯è®¿é—®çš„ã€‚ ä¸‹é¢æ˜¯ä¸€äº›ä»å¤–éƒ¨è·å–å…¨å±€å¯¹è±¡çš„ä»£ç ï¼Œä½œä¸ºå•ä¸ªå‚æ•°ä¼ é€’ç»™ IIFEï¼Œå®ƒåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½æœ‰æ•ˆï¼Œä½†å®é™…ä¸Šä¸é€‚ç”¨äº d8 å½“åœ¨æ¨¡å—ä¸­æˆ–åœ¨å‡½æ•°å†…çš„ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ˆå¯ä»¥ä½¿ç”¨å‡½æ•°æŠ€å·§ä¿®å¤ï¼‰ï¼š function foo() { // If we're in a browser, the global namespace is named 'window'. If we're // in node, it's named 'global'. If we're in a shell, 'this' might work. (typeof window !== \\\"undefined\\\" ? window : (typeof process === 'object' && typeof require === 'function' && typeof global === 'object') ? global : this); } æ­¤å¤–ï¼Œç”±äº CSP é—®é¢˜ï¼Œes6-shim å¿…é¡»ä» Function('return this')() è½¬æ¢ï¼Œ å½“å‰å¤„ç† browsersã€nodeã€web workersã€frames æ–¹å¼å¦‚ä¸‹ï¼š const getGlobal = function () { // the only reliable means to get the global object is // `Function('return this')()` // However, this causes CSP violations in Chrome apps. if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } throw new Error('unable to locate global object'); };\\n\\nè¯­æ³• åœ¨æµè§ˆå™¨ä¸­ï¼Œ windowã€globalThisã€this ä¸‰è€…å…¨ç­‰ï¼š window === this;       // true window === globalThis; // true this === globalThis;   // true åœ¨ node.js ä¸­ï¼Œglobalã€globalThisã€this ä¸‰è€…å…¨ç­‰ï¼š\\n\\n> global === this;       // true global === globalThis; // true this === globalThis;   // true\\n\\n7ã€Nullish Coalescing\\n\\næ¦‚è¿°\\n\\nç©ºå€¼åˆå¹¶æ“ä½œç¬¦ï¼ˆ??ï¼‰æ˜¯ä¸€ä¸ªé€»è¾‘æ“ä½œç¬¦ï¼Œå½“å·¦ä¾§çš„æ“ä½œæ•°ä¸º null æˆ–è€… undefined æ—¶ï¼Œè¿”å›å…¶å³ä¾§æ“ä½œæ•°ï¼Œå¦åˆ™è¿”å›å·¦ä¾§æ“ä½œæ•°ã€‚ è¯¥ææ¡ˆç›®å‰å¤„äº Stage 4 é˜¶æ®µã€‚ TC39 ç›´é€šè½¦\\n\\nåŠ¨æœº åœ¨æ‰§è¡Œå±æ€§è®¿é—®æ—¶ï¼Œå¦‚æœå±æ€§è®¿é—®çš„ç»“æœä¸º null æˆ– undefinedï¼Œåˆ™é€šå¸¸éœ€è¦æä¾›é»˜è®¤å€¼ã€‚ç›®å‰ï¼Œåœ¨ JavaScript ä¸­è¡¨è¾¾æ­¤æ„å›¾çš„ä¸€ç§å…¸å‹æ–¹å¼æ˜¯ä½¿ç”¨ || è¿ç®—ç¬¦ã€‚ const response = { settings: { nullValue: null, height: 400, animationDuration: 0, headerText: '', showSplashScreen: false, }, }; const undefinedValue = response.settings.undefinedValue || 'some other default'; // result: 'some other default' const nullValue = response.settings.nullValue || 'some other default'; // result: 'some other default' è¿™å¯¹äº null å’Œ undefined çš„å€¼å¸¸è§æƒ…å†µéå¸¸æœ‰æ•ˆï¼Œä½†æœ‰è®¸å¤š falsy å€¼å¯èƒ½ä¼šäº§ç”Ÿä»¤äººæƒŠè®¶çš„ç»“æœï¼š const headerText = response.settings.headerText || 'Hello, world!'; // Potentially unintended. '' is falsy, result: 'Hello, world!' const animationDuration = response.settings.animationDuration || 300; // Potentially unintended. 0 is falsy, result: 300 const showSplashScreen = response.settings.showSplashScreen || true; // Potentially unintended. false is falsy, result: true\\n\\nè¯­æ³•\\n\\nleftExpr ?? rightExpr\\n\\nä¾‹å­ï¼š letÂ userÂ =Â { u1:Â 0, u2:Â false, u3:Â null, u4:Â undefined, u5:Â '', } letÂ u2Â =Â user.u2Â ??Â 'ç”¨æˆ·2';Â //Â false letÂ u3Â =Â user.u3Â ??Â 'ç”¨æˆ·3';Â //Â ç”¨æˆ·3 letÂ u4Â =Â user.u4Â ??Â 'ç”¨æˆ·4';Â //Â ç”¨æˆ·4 letÂ u5Â =Â user.u5Â ??Â 'ç”¨æˆ·5';Â //Â ''\\n\\n8ã€Optional Chaining\\n\\næ¦‚è¿°\\n\\nå¯é€‰é“¾æ“ä½œç¬¦ï¼ˆ?.ï¼‰å…è®¸è¯»å–ä½äºè¿æ¥å¯¹è±¡é“¾æ·±å¤„çš„å±æ€§çš„å€¼ï¼Œè€Œä¸å¿…æ˜ç¡®éªŒè¯é“¾ä¸­çš„æ¯ä¸ªå¼•ç”¨æ˜¯å¦æœ‰æ•ˆã€‚?. æ“ä½œç¬¦çš„åŠŸèƒ½ç±»ä¼¼äº . é“¾å¼æ“ä½œç¬¦ï¼Œä¸åŒä¹‹å¤„åœ¨äºï¼Œåœ¨å¼•ç”¨ï¼ˆnull æˆ–è€… undefinedï¼‰çš„æƒ…å†µä¸‹ä¸ä¼šå¼•èµ·é”™è¯¯ï¼Œè¯¥è¡¨è¾¾å¼çŸ­è·¯è¿”å›å€¼æ˜¯ undefinedã€‚ä¸å‡½æ•°è°ƒç”¨ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œå¦‚æœç»™å®šçš„å‡½æ•°ä¸å­˜åœ¨ï¼Œåˆ™è¿”å› undefinedã€‚ è¯¥ææ¡ˆç›®å‰å¤„äº Stage 4 é˜¶æ®µã€‚ TC39 ç›´é€šè½¦\\n\\nåŠ¨æœº åœ¨å¯»æ‰¾å¯¹è±¡ç»“æ„æ·±å¤„çš„å±æ€§å€¼æ—¶ï¼Œé€šå¸¸å¿…é¡»æ£€æŸ¥ä¸­é—´èŠ‚ç‚¹æ˜¯å¦å­˜åœ¨ï¼š const street = user.address && user.address.street; æ­¤å¤–ï¼Œè®¸å¤š API è¿”å›å¯¹è±¡æˆ– null/undefinedï¼Œå¹¶ä¸”å¯èƒ½å¸Œæœ›ä»…åœ¨ç»“æœä¸ä¸º null æ—¶ä»ç»“æœä¸­æå–å±æ€§ï¼š const fooInput = myForm.querySelector('input\\\\[name=foo\\\\]'); const fooValue = fooInput ? fooInput.value : undefined;\\n\\nè¯­æ³•\\n\\nobj?.prop obj?.\\\\[expr\\\\] arr?.\\\\[index\\\\] func?.(args)\\n\\nä¾‹å­ï¼š ä½¿ç”¨å¯é€‰é“¾è®¿é—®å¯¹è±¡å±æ€§ï¼š letÂ userÂ =Â {}; letÂ u1Â =Â [user.childer.name](http://user.childer.name); //Â TypeError:Â CannotÂ readÂ propertyÂ 'name'Â ofÂ undefined letÂ u1Â =Â user?.childer?.name; //Â undefined ä½¿ç”¨å¯é€‰é“¾è¿›è¡Œå‡½æ•°è°ƒç”¨ function doSomething(onContent, onError) { try { // ... do something with the data } catch (err) { onError?.(err.message); // å¦‚æœonErroræ˜¯undefinedä¹Ÿä¸ä¼šæœ‰å¼‚å¸¸ } } å½“ä½¿ç”¨æ–¹æ‹¬å·ä¸å±æ€§åçš„å½¢å¼æ¥è®¿é—®å±æ€§æ—¶ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å¯é€‰é“¾æ“ä½œç¬¦ï¼š const nestedProp = obj?.\\\\['prop' + 'Name'\\\\]; å¯é€‰é“¾è®¿é—®æ•°ç»„å…ƒç´ ï¼š let arrayItem = arr?.\\\\[42\\\\];\\n\\nES12ï¼ˆES2021ï¼‰\\n\\n1ã€String.prototype.replaceAll\\n\\næ¦‚è¿°\\n\\nreplaceAll() æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œæ–°å­—ç¬¦ä¸²æ‰€æœ‰æ»¡è¶³ pattern çš„éƒ¨åˆ†éƒ½å·²è¢« replacement æ›¿æ¢ã€‚pattern å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–ä¸€ä¸ª RegExpï¼Œ replacement å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–ä¸€ä¸ªåœ¨æ¯æ¬¡åŒ¹é…è¢«è°ƒç”¨çš„å‡½æ•°ã€‚ è¯¥ææ¡ˆç›®å‰å¤„äº Stage 4 é˜¶æ®µã€‚ TC39 ç›´é€šè½¦\\n\\nåŠ¨æœº ç›®å‰æ²¡æœ‰åŠæ³•åœ¨ä¸ä½¿ç”¨å…¨å±€æ­£åˆ™è¡¨è¾¾å¼çš„æƒ…å†µä¸‹æ›¿æ¢å­—ç¬¦ä¸²ä¸­å­å­—ç¬¦ä¸²çš„æ‰€æœ‰å®ä¾‹ã€‚ String.prototype.replace ä»…åœ¨ä¸å­—ç¬¦ä¸²å‚æ•°ä¸€èµ·ä½¿ç”¨æ—¶æ›¿æ¢æ‰ç¬¬ä¸€æ¬¡å‡ºç°çš„å­å­—ç¬¦ä¸²ã€‚ ç›®å‰å®ç°è¿™ä¸€ç›®æ ‡çš„æœ€å¸¸è§æ–¹æ³•æ˜¯ä½¿ç”¨å…¨å±€æ­£åˆ™è¡¨è¾¾å¼ï¼š const queryString = 'q=query+string+parameters'; const withSpaces = queryString.replace(/+/g, ' '); è¿™ç§æ–¹æ³•çš„ç¼ºç‚¹æ˜¯éœ€è¦å¯¹ç‰¹æ®Šçš„ RegExp å­—ç¬¦è¿›è¡Œè½¬ä¹‰â€”â€”æ³¨æ„è½¬ä¹‰çš„ +ã€‚ å¦ä¸€ç§è§£å†³æ–¹æ¡ˆæ˜¯ç»“åˆ String.split å’Œ Array.joinï¼š const queryString = 'q=query+string+parameters'; const withSpaces = queryString.split('+').join(' '); è¿™ç§æ–¹æ³•é¿å…äº†ä»»ä½•è½¬ä¹‰ï¼Œä½†å¸¦æ¥äº†å°†å­—ç¬¦ä¸²æ‹†åˆ†ä¸ºæ•°ç»„ï¼Œç„¶åå†å°†æ•°ç»„å„é¡¹é‡æ–°ç²˜åˆåœ¨ä¸€èµ·çš„å¼€é”€ã€‚\\n\\nè¯­æ³•\\n\\nString.prototype.replaceAll(searchValue, replaceValue);\\n\\nè¿”å›ä¸€ä¸ªå…¨æ–°çš„å­—ç¬¦ä¸²ï¼Œæ‰€æœ‰ç¬¦åˆåŒ¹é…è§„åˆ™çš„å­—ç¬¦éƒ½å°†è¢«æ›¿æ¢æ‰ã€‚ é™¤äº†ä»¥ä¸‹ä¸¤ç§æƒ…å†µå¤–ï¼Œåœ¨å…¶ä»–æ‰€æœ‰æƒ…å†µä¸‹ String.prototype.replaceAll è¡Œä¸ºéƒ½ä¸ String.prototype.replace ç›¸åŒï¼š\\n\\nå¦‚æœ searchValue æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ŒString.prototype.replace åªæ›¿æ¢ä¸€æ¬¡å‡ºç°çš„ searchValueï¼Œè€Œ String.prototype.replaceAll æ›¿æ¢æ‰€æœ‰å‡ºç°çš„ searchValueã€‚ å¦‚æœ searchValue æ˜¯éå…¨å±€æ­£åˆ™è¡¨è¾¾å¼ï¼Œåˆ™ String.prototype.replace æ›¿æ¢å•ä¸ªåŒ¹é…é¡¹ï¼Œè€Œ String.prototype.replaceAll æŠ›å‡ºå¼‚å¸¸ã€‚è¿™æ ·åšæ˜¯ä¸ºäº†é¿å…ç¼ºå°‘å…¨å±€æ ‡å¿—ï¼ˆè¿™æ„å‘³ç€â€œä¸è¦å…¨éƒ¨æ›¿æ¢â€ï¼‰å’Œè¢«è°ƒç”¨æ–¹æ³•çš„åç§°ï¼ˆå¼ºçƒˆå»ºè®®â€œå…¨éƒ¨æ›¿æ¢â€ï¼‰ä¹‹é—´çš„å›ºæœ‰æ··æ·†ã€‚\\n\\nä¾‹å­ï¼š const queryString = 'q=query+string+parameters'; const withSpaces = queryString.replaceAll('+', ' ');\\n\\n2ã€Promise.any\\n\\næ¦‚è¿°\\n\\nPromise.any() æ¥æ”¶ä¸€ä¸ª Promise å¯è¿­ä»£å¯¹è±¡ï¼Œåªè¦å…¶ä¸­çš„ä¸€ä¸ª promise æˆåŠŸï¼Œå°±è¿”å›é‚£ä¸ªå·²ç»æˆåŠŸçš„ promiseã€‚å¦‚æœå¯è¿­ä»£å¯¹è±¡ä¸­æ²¡æœ‰ä¸€ä¸ª promise æˆåŠŸï¼ˆå³æ‰€æœ‰çš„ promises éƒ½å¤±è´¥/æ‹’ç»ï¼‰ï¼Œå°±è¿”å›ä¸€ä¸ªå¤±è´¥çš„ promiseã€‚ è¯¥ææ¡ˆç›®å‰å¤„äº Stage 4 é˜¶æ®µã€‚ TC39 ç›´é€šè½¦\\n\\nè¯­æ³•\\n\\nPromise.any(iterable)\\n\\niterableï¼šä¸€ä¸ªå¯è¿­ä»£çš„å¯¹è±¡ï¼Œä¾‹å¦‚ Arrayã€‚\\n\\nä¾‹å­ï¼š const promise1 = new Promise((resolve, reject) => reject('å¤±è´¥çš„Promise1')); const promise2 = new Promise((resolve, reject) => reject('å¤±è´¥çš„Promise2')); const promiseList = \\\\[promise1, promise2\\\\]; Promise.any(promiseList) .then(values=>{ console.log(values); }) .catch(error=>{ console.log(error); }); åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œé”™è¯¯æ˜¯ AggregateErrorï¼Œå®ƒæ˜¯ä¸€ä¸ªæ–°çš„é”™è¯¯å­ç±»ï¼Œå°†å„ä¸ªé”™è¯¯ç»„åˆã€‚\\n\\n3ã€é€»è¾‘èµ‹å€¼è¿ç®—ç¬¦\\n\\næ¦‚è¿°\\n\\nTC39 é€šè½¦å³å°†å¼€å§‹ã€‚\\n\\nè¯­æ³•\\n\\n||= &&= ??=\\n\\nä¾‹å­ï¼š a ||= b; //ç­‰ä»·äºa = a || (a = b);\\n\\na &&= b; //ç­‰ä»·äºa = a && (a = b);\\n\\na ??= b; //ç­‰ä»·äºa = a ?? (a = b);\\n\\n4ã€æ•°å­—åˆ†éš”ç¬¦\\n\\næ¦‚è¿°\\n\\næ•°å­—æ–‡å­—çŸ­ä¿¡æ”¯æŒæ˜¯å°†å…¶æ—©æœŸä¸ Christophe Porteneuve çš„é™„å±æ•°å­—ä¸‹åˆ’çº¿åˆå¹¶çš„ç»“æœï¼Œä»¥æ‰©å±•ç°æœ‰æ•°å­—æ–‡å­—çš„è¯·æ±‚ã€‚è¯·æ±‚å½“å‰å¤„äºç¬¬ 4 é˜¶æ®µã€‚TC39 ç›´é€šè½¦\\n\\nåŠ¨æœºè¿™ä¸ªåŠŸèƒ½ä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿé€šè¿‡åœ¨æ•°å­—ä¹‹é—´åˆ›é€ è§†è§‰å¸å¼•åŠ›æ¥ä½¿ä»–ä»¬çš„æ•°å­—æ–‡å­—å…·æœ‰ç‰¹æ®Šæ€§ã€‚\\n\\nè¯­æ³•\\n\\nä½¿ç”¨ä¸‹åˆ’çº¿_ï¼ˆU+005Fï¼‰åœ¨æ•°å­—é—´è¿›è¡Œè¯·ç¤ºã€‚\\n\\nä¾‹å­ï¼š åè¿›åˆ¶ const price1 = 1_000_000_000; å¸¸é‡ä»·æ ¼ 2 = 1000000000ï¼›ä»·æ ¼ 1 === ä»·æ ¼ 2ï¼›// çœŸçš„\\n\\nconst float1 = 0.000_001; const float2 = 0.000001; æµ®ç‚¹1 ===æµ®ç‚¹2ï¼›//çœŸçš„; äºŒè¿›åˆ¶ const nibbles1 = 0b1010_0001_1000_0101; const nibbles2 = 0b1010000110000101; åŠå­—èŠ‚ 1 === åŠå­—èŠ‚ 2; // true åå…­è¿›åˆ¶ const message1 = 0xA1_B1_C1; æ¶ˆæ¯æ¶ˆæ¯2 = 0xA1B1C1ï¼›æ¶ˆæ¯1 === 2; // true BigInt const big1 = 1_000_000_000n; const big2 = 1000000000nï¼›å¤§1 === å¤§2ï¼›// çœŸçš„\",\"timestamp\":1640253921,\"title\":\"ES7 åˆ° ES12 å¸¸ç”¨æ–°è¯­æ³•\"},\"digest\":\"On6XIN71Waw99yDJC08lplVb-LmtcrHmVStEYLQ3kzE\",\"authorship\":{\"contributor\":\"0x6b9a51DA0bd43437987AfA76ACF4ca667e0F0E10\",\"signingKey\":\"{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"0dDgyOk70wIPQDq_bIgKUabZcXxHDH_iEybmTJps3wQ\\\",\\\"y\\\":\\\"CIBe_qi0dl8bp5-qR2w66kTfXGEUsIThV6ZhLLlleXU\\\"}\",\"signature\":\"u6tbdLkwMfqv8deZGrD4CTXHYJpsY_qdD77dimdeluAkvlqpKHgNjQAiI-NIeC2Fpg5jDZQwXNbRuux8W2ADvQ\",\"signingKeySignature\":\"0xc1a429b9bc1d4cd612c46325c5249e69b64f4fcf8b6eacce2a53a80155140c9a367a7e723c46acd9107c749459925af7ceda05b0520976574d228ad82dfb02b61c\",\"signingKeyMessage\":\"I authorize publishing on mirror.xyz from this device using:\\n{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"0dDgyOk70wIPQDq_bIgKUabZcXxHDH_iEybmTJps3wQ\\\",\\\"y\\\":\\\"CIBe_qi0dl8bp5-qR2w66kTfXGEUsIThV6ZhLLlleXU\\\"}\",\"algorithm\":{\"name\":\"ECDSA\",\"hash\":\"SHA-256\"}},\"nft\":{},\"version\":\"12-21-2020\",\"originalDigest\":\"eQntEEP5_1B9-pGLG9JpNgQPnXDPqX9MsU1uW-XIggQ\"}"